BUILD:
[33mbase commit: 5955102c9984^1
[0m[33mtarget commit: 5955102c9984
[0m[33mchecking out base commit... [0m[33mok (1s)
[0m[33mformatting diff... [0m[33mok (1s)
[0m177 source file(s) touched in the old version
`-- arch/powerpc/platforms/cell/spufs/file.c
`-- arch/powerpc/platforms/cell/spufs/inode.c
`-- arch/s390/hypfs/inode.c
`-- block/ioctl.c
`-- drivers/base/devtmpfs.c
`-- drivers/block/aoe/aoecmd.c
`-- drivers/block/drbd/drbd_debugfs.c
`-- drivers/char/mem.c
`-- drivers/char/ps3flash.c
`-- drivers/infiniband/hw/qib/qib_fs.c
`-- drivers/mtd/ubi/cdev.c
`-- drivers/oprofile/oprofilefs.c
`-- drivers/staging/lustre/lustre/llite/dir.c
`-- drivers/staging/lustre/lustre/llite/file.c
`-- drivers/staging/lustre/lustre/llite/llite_lib.c
`-- drivers/staging/lustre/lustre/llite/llite_nfs.c
`-- drivers/staging/lustre/lustre/llite/lloop.c
`-- drivers/staging/lustre/lustre/llite/rw.c
`-- drivers/staging/lustre/lustre/llite/rw26.c
`-- drivers/staging/lustre/lustre/llite/vvp_io.c
`-- drivers/staging/lustre/lustre/llite/vvp_page.c
`-- drivers/staging/rdma/ipath/ipath_fs.c
`-- drivers/usb/gadget/function/f_printer.c
`-- drivers/usb/gadget/legacy/inode.c
`-- drivers/usb/gadget/udc/atmel_usba_udc.c
`-- drivers/video/fbdev/core/fb_defio.c
`-- fs/9p/vfs_file.c
`-- fs/affs/file.c
`-- fs/afs/flock.c
`-- fs/afs/write.c
`-- fs/attr.c
`-- fs/binfmt_misc.c
`-- fs/block_dev.c
`-- fs/btrfs/file.c
`-- fs/btrfs/inode.c
`-- fs/btrfs/ioctl.c
`-- fs/btrfs/relocation.c
`-- fs/btrfs/scrub.c
`-- fs/btrfs/xattr.c
`-- fs/cachefiles/interface.c
`-- fs/cachefiles/namei.c
`-- fs/ceph/cache.c
`-- fs/ceph/caps.c
`-- fs/ceph/dir.c
`-- fs/ceph/export.c
`-- fs/ceph/file.c
`-- fs/cifs/cifsfs.c
`-- fs/cifs/file.c
`-- fs/coda/dir.c
`-- fs/coda/file.c
`-- fs/configfs/dir.c
`-- fs/configfs/file.c
`-- fs/configfs/inode.c
`-- fs/dax.c
`-- fs/dcache.c
`-- fs/debugfs/inode.c
`-- fs/devpts/inode.c
`-- fs/direct-io.c
`-- fs/ecryptfs/inode.c
`-- fs/ecryptfs/mmap.c
`-- fs/efivarfs/file.c
`-- fs/efivarfs/super.c
`-- fs/exec.c
`-- fs/exofs/file.c
`-- fs/exportfs/expfs.c
`-- fs/ext2/ioctl.c
`-- fs/ext4/ext4.h
`-- fs/ext4/extents.c
`-- fs/ext4/file.c
`-- fs/ext4/inode.c
`-- fs/ext4/ioctl.c
`-- fs/ext4/namei.c
`-- fs/ext4/super.c
`-- fs/f2fs/data.c
`-- fs/f2fs/file.c
`-- fs/fat/dir.c
`-- fs/fat/file.c
`-- fs/fuse/dir.c
`-- fs/fuse/file.c
`-- fs/gfs2/file.c
`-- fs/gfs2/inode.c
`-- fs/gfs2/quota.c
`-- fs/hfs/dir.c
`-- fs/hfs/inode.c
`-- fs/hfsplus/dir.c
`-- fs/hfsplus/inode.c
`-- fs/hfsplus/ioctl.c
`-- fs/hostfs/hostfs_kern.c
`-- fs/hpfs/dir.c
`-- fs/hugetlbfs/inode.c
`-- fs/inode.c
`-- fs/ioctl.c
`-- fs/jffs2/file.c
`-- fs/jfs/file.c
`-- fs/jfs/ioctl.c
`-- fs/jfs/super.c
`-- fs/kernfs/dir.c
`-- fs/libfs.c
`-- fs/locks.c
`-- fs/logfs/file.c
`-- fs/namei.c
`-- fs/namespace.c
`-- fs/ncpfs/dir.c
`-- fs/ncpfs/file.c
`-- fs/nfs/dir.c
`-- fs/nfs/direct.c
`-- fs/nfs/file.c
`-- fs/nfs/inode.c
`-- fs/nfs/nfs42proc.c
`-- fs/nfs/nfs4file.c
`-- fs/nfsd/nfs4proc.c
`-- fs/nfsd/nfs4recover.c
`-- fs/nfsd/nfsfh.h
`-- fs/nfsd/vfs.c
`-- fs/nilfs2/inode.c
`-- fs/nilfs2/ioctl.c
`-- fs/ntfs/dir.c
`-- fs/ntfs/file.c
`-- fs/ntfs/quota.c
`-- fs/ntfs/super.c
`-- fs/ocfs2/alloc.c
`-- fs/ocfs2/aops.c
`-- fs/ocfs2/dir.c
`-- fs/ocfs2/file.c
`-- fs/ocfs2/inode.c
`-- fs/ocfs2/ioctl.c
`-- fs/ocfs2/journal.c
`-- fs/ocfs2/localalloc.c
`-- fs/ocfs2/move_extents.c
`-- fs/ocfs2/namei.c
`-- fs/ocfs2/quota_global.c
`-- fs/ocfs2/refcounttree.c
`-- fs/ocfs2/resize.c
`-- fs/ocfs2/suballoc.c
`-- fs/ocfs2/xattr.c
`-- fs/open.c
`-- fs/overlayfs/copy_up.c
`-- fs/overlayfs/dir.c
`-- fs/overlayfs/inode.c
`-- fs/overlayfs/readdir.c
`-- fs/overlayfs/super.c
`-- fs/proc/kcore.c
`-- fs/proc/self.c
`-- fs/proc/thread_self.c
`-- fs/pstore/inode.c
`-- fs/quota/dquot.c
`-- fs/read_write.c
`-- fs/readdir.c
`-- fs/reiserfs/dir.c
`-- fs/reiserfs/file.c
`-- fs/reiserfs/ioctl.c
`-- fs/reiserfs/xattr.c
`-- fs/tracefs/inode.c
`-- fs/ubifs/dir.c
`-- fs/ubifs/file.c
`-- fs/ubifs/xattr.c
`-- fs/udf/file.c
`-- fs/udf/inode.c
`-- fs/utimes.c
`-- fs/xattr.c
`-- fs/xfs/xfs_file.c
`-- fs/xfs/xfs_pnfs.c
`-- include/linux/fs.h
`-- ipc/mqueue.c
`-- kernel/audit_fsnotify.c
`-- kernel/audit_watch.c
`-- kernel/events/core.c
`-- kernel/relay.c
`-- kernel/sched/core.c
`-- mm/filemap.c
`-- mm/shmem.c
`-- mm/swapfile.c
`-- net/sunrpc/cache.c
`-- net/sunrpc/rpc_pipe.c
`-- security/inode.c
`-- security/integrity/ima/ima_main.c
`-- security/selinux/selinuxfs.c
177 source file(s) touched in the new version
`-- arch/powerpc/platforms/cell/spufs/file.c
`-- arch/powerpc/platforms/cell/spufs/inode.c
`-- arch/s390/hypfs/inode.c
`-- block/ioctl.c
`-- drivers/base/devtmpfs.c
`-- drivers/block/aoe/aoecmd.c
`-- drivers/block/drbd/drbd_debugfs.c
`-- drivers/char/mem.c
`-- drivers/char/ps3flash.c
`-- drivers/infiniband/hw/qib/qib_fs.c
`-- drivers/mtd/ubi/cdev.c
`-- drivers/oprofile/oprofilefs.c
`-- drivers/staging/lustre/lustre/llite/dir.c
`-- drivers/staging/lustre/lustre/llite/file.c
`-- drivers/staging/lustre/lustre/llite/llite_lib.c
`-- drivers/staging/lustre/lustre/llite/llite_nfs.c
`-- drivers/staging/lustre/lustre/llite/lloop.c
`-- drivers/staging/lustre/lustre/llite/rw.c
`-- drivers/staging/lustre/lustre/llite/rw26.c
`-- drivers/staging/lustre/lustre/llite/vvp_io.c
`-- drivers/staging/lustre/lustre/llite/vvp_page.c
`-- drivers/staging/rdma/ipath/ipath_fs.c
`-- drivers/usb/gadget/function/f_printer.c
`-- drivers/usb/gadget/legacy/inode.c
`-- drivers/usb/gadget/udc/atmel_usba_udc.c
`-- drivers/video/fbdev/core/fb_defio.c
`-- fs/9p/vfs_file.c
`-- fs/affs/file.c
`-- fs/afs/flock.c
`-- fs/afs/write.c
`-- fs/attr.c
`-- fs/binfmt_misc.c
`-- fs/block_dev.c
`-- fs/btrfs/file.c
`-- fs/btrfs/inode.c
`-- fs/btrfs/ioctl.c
`-- fs/btrfs/relocation.c
`-- fs/btrfs/scrub.c
`-- fs/btrfs/xattr.c
`-- fs/cachefiles/interface.c
`-- fs/cachefiles/namei.c
`-- fs/ceph/cache.c
`-- fs/ceph/caps.c
`-- fs/ceph/dir.c
`-- fs/ceph/export.c
`-- fs/ceph/file.c
`-- fs/cifs/cifsfs.c
`-- fs/cifs/file.c
`-- fs/coda/dir.c
`-- fs/coda/file.c
`-- fs/configfs/dir.c
`-- fs/configfs/file.c
`-- fs/configfs/inode.c
`-- fs/dax.c
`-- fs/dcache.c
`-- fs/debugfs/inode.c
`-- fs/devpts/inode.c
`-- fs/direct-io.c
`-- fs/ecryptfs/inode.c
`-- fs/ecryptfs/mmap.c
`-- fs/efivarfs/file.c
`-- fs/efivarfs/super.c
`-- fs/exec.c
`-- fs/exofs/file.c
`-- fs/exportfs/expfs.c
`-- fs/ext2/ioctl.c
`-- fs/ext4/ext4.h
`-- fs/ext4/extents.c
`-- fs/ext4/file.c
`-- fs/ext4/inode.c
`-- fs/ext4/ioctl.c
`-- fs/ext4/namei.c
`-- fs/ext4/super.c
`-- fs/f2fs/data.c
`-- fs/f2fs/file.c
`-- fs/fat/dir.c
`-- fs/fat/file.c
`-- fs/fuse/dir.c
`-- fs/fuse/file.c
`-- fs/gfs2/file.c
`-- fs/gfs2/inode.c
`-- fs/gfs2/quota.c
`-- fs/hfs/dir.c
`-- fs/hfs/inode.c
`-- fs/hfsplus/dir.c
`-- fs/hfsplus/inode.c
`-- fs/hfsplus/ioctl.c
`-- fs/hostfs/hostfs_kern.c
`-- fs/hpfs/dir.c
`-- fs/hugetlbfs/inode.c
`-- fs/inode.c
`-- fs/ioctl.c
`-- fs/jffs2/file.c
`-- fs/jfs/file.c
`-- fs/jfs/ioctl.c
`-- fs/jfs/super.c
`-- fs/kernfs/dir.c
`-- fs/libfs.c
`-- fs/locks.c
`-- fs/logfs/file.c
`-- fs/namei.c
`-- fs/namespace.c
`-- fs/ncpfs/dir.c
`-- fs/ncpfs/file.c
`-- fs/nfs/dir.c
`-- fs/nfs/direct.c
`-- fs/nfs/file.c
`-- fs/nfs/inode.c
`-- fs/nfs/nfs42proc.c
`-- fs/nfs/nfs4file.c
`-- fs/nfsd/nfs4proc.c
`-- fs/nfsd/nfs4recover.c
`-- fs/nfsd/nfsfh.h
`-- fs/nfsd/vfs.c
`-- fs/nilfs2/inode.c
`-- fs/nilfs2/ioctl.c
`-- fs/ntfs/dir.c
`-- fs/ntfs/file.c
`-- fs/ntfs/quota.c
`-- fs/ntfs/super.c
`-- fs/ocfs2/alloc.c
`-- fs/ocfs2/aops.c
`-- fs/ocfs2/dir.c
`-- fs/ocfs2/file.c
`-- fs/ocfs2/inode.c
`-- fs/ocfs2/ioctl.c
`-- fs/ocfs2/journal.c
`-- fs/ocfs2/localalloc.c
`-- fs/ocfs2/move_extents.c
`-- fs/ocfs2/namei.c
`-- fs/ocfs2/quota_global.c
`-- fs/ocfs2/refcounttree.c
`-- fs/ocfs2/resize.c
`-- fs/ocfs2/suballoc.c
`-- fs/ocfs2/xattr.c
`-- fs/open.c
`-- fs/overlayfs/copy_up.c
`-- fs/overlayfs/dir.c
`-- fs/overlayfs/inode.c
`-- fs/overlayfs/readdir.c
`-- fs/overlayfs/super.c
`-- fs/proc/kcore.c
`-- fs/proc/self.c
`-- fs/proc/thread_self.c
`-- fs/pstore/inode.c
`-- fs/quota/dquot.c
`-- fs/read_write.c
`-- fs/readdir.c
`-- fs/reiserfs/dir.c
`-- fs/reiserfs/file.c
`-- fs/reiserfs/ioctl.c
`-- fs/reiserfs/xattr.c
`-- fs/tracefs/inode.c
`-- fs/ubifs/dir.c
`-- fs/ubifs/file.c
`-- fs/ubifs/xattr.c
`-- fs/udf/file.c
`-- fs/udf/inode.c
`-- fs/utimes.c
`-- fs/xattr.c
`-- fs/xfs/xfs_file.c
`-- fs/xfs/xfs_pnfs.c
`-- include/linux/fs.h
`-- ipc/mqueue.c
`-- kernel/audit_fsnotify.c
`-- kernel/audit_watch.c
`-- kernel/events/core.c
`-- kernel/relay.c
`-- kernel/sched/core.c
`-- mm/filemap.c
`-- mm/shmem.c
`-- mm/swapfile.c
`-- net/sunrpc/cache.c
`-- net/sunrpc/rpc_pipe.c
`-- security/inode.c
`-- security/integrity/ima/ima_main.c
`-- security/selinux/selinuxfs.c
[33mcompile base commit... [0m[33mok (85s)
[0m[33mapply [0m[33m5955102c9984... [0m[33mok (85s)
[0m[33mcompile target commit... [0m[33mok (158s)
[0mPREPARE:
[33mcollect AST for functions: memory_lseek@drivers_char_mem.c,cachefiles_delete_object@fs_cachefiles_namei.c,cachefiles_get_directory@fs_cachefiles_namei.c,ll_hsm_import@drivers_staging_lustre_lustre_llite_file.c,ll_swap_layouts@drivers_staging_lustre_lustre_llite_file.c,ll_cl_init@drivers_staging_lustre_lustre_llite_rw.c,cachefiles_check_active@fs_cachefiles_namei.c,cachefiles_walk_to_object@fs_cachefiles_namei.c,affs_file_fsync@fs_affs_file.c,blkdev_mmap@fs_block_dev.c,btrfs_ioctl_setflags@fs_btrfs_ioctl.c,dev_rmdir@drivers_base_devtmpfs.c,prealloc_file_extent_cluster@fs_btrfs_relocation.c,blkdev_vm_open@fs_block_dev.c,afs_fsync@fs_afs_write.c,do_bio_lustrebacked@drivers_staging_lustre_lustre_llite_lloop.c,vvp_transient_page_fini@drivers_staging_lustre_lustre_llite_vvp_page.c,ll_dir_seek@drivers_staging_lustre_lustre_llite_dir.c,btrfs_direct_IO@fs_btrfs_inode.c,block_llseek@fs_block_dev.c,btrfs_punch_hole@fs_btrfs_file.c,bm_status_write@fs_binfmt_misc.c,ll_fsync@drivers_staging_lustre_lustre_llite_file.c,btrfs_double_inode_lock@fs_btrfs_ioctl.c,afs_do_getlk@fs_afs_flock.c,btrfs_fallocate@fs_btrfs_file.c,ps3flash_fsync@drivers_char_ps3flash.c,btrfs_clone_files@fs_btrfs_ioctl.c,aoecmd_sleepwork@drivers_block_aoe_aoecmd.c,cachefiles_check_in_use@fs_cachefiles_namei.c,notify_change@fs_attr.c,v9fs_file_fsync@fs_9p_vfs_file.c,handle_remove@drivers_base_devtmpfs.c,blkdev_daxset@block_ioctl.c,ll_direct_IO_26@drivers_staging_lustre_lustre_llite_rw26.c,fb_deferred_io_fsync@drivers_video_fbdev_core_fb_defio.c,bm_entry_write@fs_binfmt_misc.c,vvp_io_setattr_start@drivers_staging_lustre_lustre_llite_vvp_io.c,drbd_single_open@drivers_block_drbd_drbd_debugfs.c,bm_register_write@fs_binfmt_misc.c,vol_cdev_fsync@drivers_mtd_ubi_cdev.c,btrfs_defrag_file@fs_btrfs_ioctl.c,vvp_transient_page_verify@drivers_staging_lustre_lustre_llite_vvp_page.c,btrfs_ioctl_snap_destroy@fs_btrfs_ioctl.c,btrfs_file_write_iter@fs_btrfs_file.c,remove_device_files@drivers_infiniband_hw_qib_qib_fs.c,blkdev_vm_close@fs_block_dev.c,do_setxattr@fs_btrfs_xattr.c,vvp_page_init@drivers_staging_lustre_lustre_llite_vvp_page.c,ceph_fsync@fs_ceph_caps.c,regs_dbg_read@drivers_usb_gadget_udc_atmel_usba_udc.c,bd_set_size@fs_block_dev.c,ll_get_name@drivers_staging_lustre_lustre_llite_llite_nfs.c,vvp_io_setattr_end@drivers_staging_lustre_lustre_llite_vvp_io.c,btrfs_double_inode_unlock@fs_btrfs_ioctl.c,vvp_transient_page_is_vmlocked@drivers_staging_lustre_lustre_llite_vvp_page.c,affs_file_release@fs_affs_file.c,v9fs_file_fsync_dotl@fs_9p_vfs_file.c,create_file@drivers_infiniband_hw_qib_qib_fs.c,handle_create@drivers_base_devtmpfs.c,cachefiles_bury_object@fs_cachefiles_namei.c,copy_nocow_pages_for_inode@fs_btrfs_scrub.c,cachefiles_cull@fs_cachefiles_namei.c,cachefiles_attr_changed@fs_cachefiles_interface.c,dir_relax@include_linux_fs.h,btrfs_extent_same@fs_btrfs_ioctl.c,remove_device_files@drivers_staging_rdma_ipath_ipath_fs.c,btrfs_file_llseek@fs_btrfs_file.c,printer_fsync@drivers_usb_gadget_function_f_printer.c,ceph_fscache_register_inode_cookie@fs_ceph_cache.c,ll_setattr_raw@drivers_staging_lustre_lustre_llite_llite_lib.c,queue_dbg_read@drivers_usb_gadget_udc_atmel_usba_udc.c,regs_dbg_open@drivers_usb_gadget_udc_atmel_usba_udc.c,destroy_ep_files@drivers_usb_gadget_legacy_inode.c,btrfs_mksubvol@fs_btrfs_ioctl.c,btrfs_sync_file@fs_btrfs_file.c,create_file@drivers_staging_rdma_ipath_ipath_fs.c
[0m[33mTransforming and linking bitcode files...
[0m[33m14s
[0mANALYZE:
COCCIGEN:
//# pattern-1, witnesses: 89
@@
expression E0;
@@
- mutex_unlock(&E0->i_mutex)
+ inode_unlock(E0)
//# pattern-2, witnesses: 54
@@
expression E0;
@@
- mutex_lock(&E0->i_mutex)
+ inode_lock(E0)
//# pattern-3, witnesses: 5
@@
expression E0;
expression EC1;
@@
- mutex_lock_nested(&E0->i_mutex, EC1)
+ inode_lock_nested(E0, EC1)
//# pattern-9, witnesses: 5
@@
expression E0;
@@
- mutex_trylock(&E0->i_mutex)
+ inode_trylock(E0)
//# pattern-4, witnesses: 2
@@
@@
- mutex_is_locked(&inode->i_mutex)
+ inode_is_locked(inode)
//# pattern-5, witnesses: 2
@@
@@
- libcfs_debug_msg(&__msg_data, "ASSERTION( %s ) failed: \n", "!mutex_trylock(&clobj->cob_inode->i_mutex)")
+ libcfs_debug_msg(&__msg_data, "ASSERTION( %s ) failed: \n", "!inode_trylock(clobj->cob_inode)")
