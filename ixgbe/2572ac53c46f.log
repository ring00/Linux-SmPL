BUILD:
[33mbase commit: 2572ac53c46f^1
[0m[33mtarget commit: 2572ac53c46f
[0m[33mchecking out base commit... [0m[33mok (1s)
[0m[33mformatting diff... [0m[33mok (1s)
[0m32 source file(s) touched in the old version
`-- drivers/net/ethernet/amd/xgbe/xgbe-drv.c
`-- drivers/net/ethernet/broadcom/bnx2x/bnx2x_cmn.c
`-- drivers/net/ethernet/broadcom/bnx2x/bnx2x_cmn.h
`-- drivers/net/ethernet/broadcom/bnxt/bnxt.c
`-- drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
`-- drivers/net/ethernet/freescale/dpaa/dpaa_eth.c
`-- drivers/net/ethernet/hisilicon/hns3/hns3pf/hns3_enet.c
`-- drivers/net/ethernet/intel/fm10k/fm10k_netdev.c
`-- drivers/net/ethernet/intel/i40e/i40e_main.c
`-- drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
`-- drivers/net/ethernet/mellanox/mlx4/en_netdev.c
`-- drivers/net/ethernet/mellanox/mlx5/core/en_main.c
`-- drivers/net/ethernet/mellanox/mlx5/core/en_rep.c
`-- drivers/net/ethernet/mellanox/mlxsw/spectrum.c
`-- drivers/net/ethernet/netronome/nfp/bpf/main.c
`-- drivers/net/ethernet/netronome/nfp/flower/main.h
`-- drivers/net/ethernet/netronome/nfp/flower/offload.c
`-- drivers/net/ethernet/netronome/nfp/nfp_app.h
`-- drivers/net/ethernet/netronome/nfp/nfp_port.c
`-- drivers/net/ethernet/netronome/nfp/nfp_port.h
`-- drivers/net/ethernet/sfc/efx.h
`-- drivers/net/ethernet/sfc/falcon/efx.h
`-- drivers/net/ethernet/sfc/falcon/tx.c
`-- drivers/net/ethernet/sfc/tx.c
`-- drivers/net/ethernet/ti/netcp_core.c
`-- include/linux/netdevice.h
`-- net/dsa/slave.c
`-- net/sched/cls_bpf.c
`-- net/sched/cls_flower.c
`-- net/sched/cls_matchall.c
`-- net/sched/cls_u32.c
`-- net/sched/sch_mqprio.c
32 source file(s) touched in the new version
`-- drivers/net/ethernet/amd/xgbe/xgbe-drv.c
`-- drivers/net/ethernet/broadcom/bnx2x/bnx2x_cmn.c
`-- drivers/net/ethernet/broadcom/bnx2x/bnx2x_cmn.h
`-- drivers/net/ethernet/broadcom/bnxt/bnxt.c
`-- drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
`-- drivers/net/ethernet/freescale/dpaa/dpaa_eth.c
`-- drivers/net/ethernet/hisilicon/hns3/hns3pf/hns3_enet.c
`-- drivers/net/ethernet/intel/fm10k/fm10k_netdev.c
`-- drivers/net/ethernet/intel/i40e/i40e_main.c
`-- drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
`-- drivers/net/ethernet/mellanox/mlx4/en_netdev.c
`-- drivers/net/ethernet/mellanox/mlx5/core/en_main.c
`-- drivers/net/ethernet/mellanox/mlx5/core/en_rep.c
`-- drivers/net/ethernet/mellanox/mlxsw/spectrum.c
`-- drivers/net/ethernet/netronome/nfp/bpf/main.c
`-- drivers/net/ethernet/netronome/nfp/flower/main.h
`-- drivers/net/ethernet/netronome/nfp/flower/offload.c
`-- drivers/net/ethernet/netronome/nfp/nfp_app.h
`-- drivers/net/ethernet/netronome/nfp/nfp_port.c
`-- drivers/net/ethernet/netronome/nfp/nfp_port.h
`-- drivers/net/ethernet/sfc/efx.h
`-- drivers/net/ethernet/sfc/falcon/efx.h
`-- drivers/net/ethernet/sfc/falcon/tx.c
`-- drivers/net/ethernet/sfc/tx.c
`-- drivers/net/ethernet/ti/netcp_core.c
`-- include/linux/netdevice.h
`-- net/dsa/slave.c
`-- net/sched/cls_bpf.c
`-- net/sched/cls_flower.c
`-- net/sched/cls_matchall.c
`-- net/sched/cls_u32.c
`-- net/sched/sch_mqprio.c
[33mcompile base commit... [0m[33mok (81s)
[0m[33mapply [0m[33m2572ac53c46f... [0m[33mok (81s)
[0m[33mcompile target commit... [0m[33mok (151s)
[0mPREPARE:
[33mcollect AST for functions: mlx5e_rep_ndo_setup_tc@drivers_net_ethernet_mellanox_mlx5_core_en_rep.c,__mlx4_en_setup_tc@drivers_net_ethernet_mellanox_mlx4_en_netdev.c,mlx5e_ndo_setup_tc@drivers_net_ethernet_mellanox_mlx5_core_en_main.c,u32_clear_hw_hnode@net_sched_cls_u32.c,bnxt_setup_tc@drivers_net_ethernet_broadcom_bnxt_bnxt.c,xgbe_setup_tc@drivers_net_ethernet_amd_xgbe_xgbe-drv.c,__bnx2x_setup_tc@drivers_net_ethernet_broadcom_bnx2x_bnx2x_cmn.c,cxgb_setup_tc@drivers_net_ethernet_chelsio_cxgb4_cxgb4_main.c,nfp_flower_setup_tc@drivers_net_ethernet_netronome_nfp_flower_offload.c,efx_setup_tc@drivers_net_ethernet_sfc_tx.c,cls_bpf_offload_cmd@net_sched_cls_bpf.c,__fm10k_setup_tc@drivers_net_ethernet_intel_fm10k_fm10k_netdev.c,u32_remove_hw_knode@net_sched_cls_u32.c,mqprio_destroy@net_sched_sch_mqprio.c,dpaa_setup_tc@drivers_net_ethernet_freescale_dpaa_dpaa_eth.c,ef4_setup_tc@drivers_net_ethernet_sfc_falcon_tx.c,u32_replace_hw_knode@net_sched_cls_u32.c,fl_hw_destroy_filter@net_sched_cls_flower.c,dsa_slave_setup_tc@net_dsa_slave.c,fl_hw_replace_filter@net_sched_cls_flower.c,mqprio_init@net_sched_sch_mqprio.c,nfp_port_setup_tc@drivers_net_ethernet_netronome_nfp_nfp_port.c,mall_replace_hw_filter@net_sched_cls_matchall.c,fl_hw_update_stats@net_sched_cls_flower.c,nfp_bpf_setup_tc@drivers_net_ethernet_netronome_nfp_bpf_main.c,__ixgbe_setup_tc@drivers_net_ethernet_intel_ixgbe_ixgbe_main.c,mall_destroy_hw_filter@net_sched_cls_matchall.c,mlxsw_sp_setup_tc@drivers_net_ethernet_mellanox_mlxsw_spectrum.c,hns3_nic_setup_tc@drivers_net_ethernet_hisilicon_hns3_hns3pf_hns3_enet.c,u32_replace_hw_hnode@net_sched_cls_u32.c,netcp_setup_tc@drivers_net_ethernet_ti_netcp_core.c,__i40e_setup_tc@drivers_net_ethernet_intel_i40e_i40e_main.c
[0m[33mTransforming and linking bitcode files...
[0m[33m15s
[0mANALYZE:
COCCIGEN:
//# pattern-2, witnesses: 14
@r0@
identifier i, fn;
@@
struct net_device_ops i = {
    .ndo_setup_tc = fn,
};
@@
typedef __be16;
identifier arg_tc_to_netdev;
identifier chain_index;
identifier handle;
identifier netdev;
identifier proto;
identifier r0.fn;
typedef u32;
@@
- int fn(struct net_device * netdev, u32 handle, u32 chain_index, __be16 proto, struct tc_to_netdev * arg_tc_to_netdev)
+ int fn(struct net_device * netdev, enum tc_setup_type type, u32 handle, u32 chain_index, __be16 proto, struct tc_to_netdev * arg_tc_to_netdev)
 {
     <...
- arg_tc_to_netdev->type
+ type
     ...>
 }
//# pattern-1, witnesses: 5
@@
expression E2;
expression EC1;
expression V0;
@@
- V0->type = EC1;
- err = dev->netdev_ops->ndo_setup_tc(dev, tp->q->handle, tp->chain->index, tp->protocol, E2);
+ err = dev->netdev_ops->ndo_setup_tc(dev, EC1, tp->q->handle, tp->chain->index, tp->protocol, E2);
//# pattern-5, witnesses: 5
@@
expression EC1;
expression V0;
@@
- V0->type = EC1;
//# pattern-10, witnesses: 4
@r1@
identifier i, fn;
@@
struct net_device_ops i = {
    .ndo_setup_tc = fn,
};
@@
expression E0;
typedef __be16;
identifier chain_index;
identifier handle;
identifier net_dev;
identifier ntc;
identifier proto;
identifier r1.fn;
identifier type;
typedef u32;
@@
 int fn(struct net_device * net_dev, enum tc_setup_type type, u32 handle, u32 chain_index, __be16 proto, struct tc_to_netdev * ntc)
 {
     <...
- ntc->type != E0
+ type != E0
     ...>
 }
//# pattern-4, witnesses: 2
@@
@@
- dev->netdev_ops->ndo_setup_tc(dev, tp->q->handle, tp->chain->index, tp->protocol, &offload)
+ dev->netdev_ops->ndo_setup_tc(dev, TC_SETUP_CLSU32, tp->q->handle, tp->chain->index, tp->protocol, &offload)
//# pattern-11, witnesses: 2
@@
@@
- dev->netdev_ops->ndo_setup_tc(dev, sch->handle, 0, 0, &tc)
+ dev->netdev_ops->ndo_setup_tc(dev, TC_SETUP_MQPRIO, sch->handle, 0, 0, &tc)
//# pattern-12, witnesses: 2
@@
identifier s;
@@
 struct tc_to_netdev s = {
-    .type = TC_SETUP_MQPRIO,
 };
