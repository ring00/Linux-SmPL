BUILD:
[33mbase commit: fe896d187894^1
[0m[33mtarget commit: fe896d187894
[0m[33mchecking out base commit... [0m[33mok (3s)
[0m[33mformatting diff... [0m[33mok (3s)
[0m24 source file(s) touched in the old version
`-- arch/mips/mm/gup.c
`-- arch/powerpc/mm/mmu_context_hash64.c
`-- arch/powerpc/mm/pgtable_64.c
`-- arch/powerpc/platforms/512x/mpc512x_shared.c
`-- arch/x86/mm/gup.c
`-- drivers/block/aoe/aoecmd.c
`-- drivers/net/ethernet/freescale/gianfar.c
`-- drivers/net/ethernet/intel/fm10k/fm10k_main.c
`-- drivers/net/ethernet/intel/igb/igb_main.c
`-- drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
`-- drivers/net/ethernet/intel/ixgbevf/ixgbevf_main.c
`-- drivers/net/ethernet/mellanox/mlx4/en_rx.c
`-- drivers/net/ethernet/sun/niu.c
`-- fs/nilfs2/page.c
`-- include/linux/mm.h
`-- include/linux/pagemap.h
`-- mm/debug.c
`-- mm/huge_memory.c
`-- mm/internal.h
`-- mm/memory_hotplug.c
`-- mm/migrate.c
`-- mm/page_alloc.c
`-- mm/vmscan.c
`-- net/core/sock.c
25 source file(s) touched in the new version
`-- arch/mips/mm/gup.c
`-- arch/powerpc/mm/mmu_context_hash64.c
`-- arch/powerpc/mm/pgtable_64.c
`-- arch/powerpc/platforms/512x/mpc512x_shared.c
`-- arch/x86/mm/gup.c
`-- drivers/block/aoe/aoecmd.c
`-- drivers/net/ethernet/freescale/gianfar.c
`-- drivers/net/ethernet/intel/fm10k/fm10k_main.c
`-- drivers/net/ethernet/intel/igb/igb_main.c
`-- drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
`-- drivers/net/ethernet/intel/ixgbevf/ixgbevf_main.c
`-- drivers/net/ethernet/mellanox/mlx4/en_rx.c
`-- drivers/net/ethernet/sun/niu.c
`-- fs/nilfs2/page.c
`-- include/linux/mm.h
`-- include/linux/page_ref.h
`-- include/linux/pagemap.h
`-- mm/debug.c
`-- mm/huge_memory.c
`-- mm/internal.h
`-- mm/memory_hotplug.c
`-- mm/migrate.c
`-- mm/page_alloc.c
`-- mm/vmscan.c
`-- net/core/sock.c
[33mIgnore files that are created or deleted by the patch.
[0m[33mcompile base commit... [0m[33mok (51s)
[0m[33mapply [0m[33mfe896d187894... [0m[33mok (51s)
[0m[33mcompile target commit... [0m[33mok (96s)
[0mPREPARE:
[33mcollect AST for functions: migrate_page_move_mapping@mm_migrate.c,fm10k_can_reuse_rx_page@drivers_net_ethernet_intel_fm10k_fm10k_main.c,put_page_testzero@include_linux_mm.h,has_unmovable_pages@mm_page_alloc.c,nilfs_page_bug@fs_nilfs2_page.c,__alloc_page_frag@mm_page_alloc.c,__remove_mapping@mm_vmscan.c,gfar_add_rx_frag@drivers_net_ethernet_freescale_gianfar.c,free_pages_check@mm_page_alloc.c,get_page@include_linux_mm.h,get_head_page_multiple@arch_x86_mm_gup.c,mlx4_alloc_pages@drivers_net_ethernet_mellanox_mlx4_en_rx.c,ixgbevf_add_rx_frag@drivers_net_ethernet_intel_ixgbevf_ixgbevf_main.c,bio_pageinc@drivers_block_aoe_aoecmd.c,get_page_unless_zero@include_linux_mm.h,mlx4_en_alloc_frags@drivers_net_ethernet_mellanox_mlx4_en_rx.c,page_cache_add_speculative@include_linux_pagemap.h,check_new_page@mm_page_alloc.c,migrate_huge_page_move_mapping@mm_migrate.c,put_page_bootmem@mm_memory_hotplug.c,__split_huge_pmd_locked@mm_huge_memory.c,igb_can_reuse_rx_page@drivers_net_ethernet_intel_igb_igb_main.c,bio_pagedec@drivers_block_aoe_aoecmd.c,set_page_refcounted@mm_internal.h,skb_page_frag_refill@net_core_sock.c,ixgbe_add_rx_frag@drivers_net_ethernet_intel_ixgbe_ixgbe_main.c,get_page_bootmem@mm_memory_hotplug.c,__split_huge_page_tail@mm_huge_memory.c,niu_rbr_add_page@drivers_net_ethernet_sun_niu.c,__dump_page@mm_debug.c,remove_mapping@mm_vmscan.c,mlx4_en_init_allocator@drivers_net_ethernet_mellanox_mlx4_en_rx.c,page_cache_get_speculative@include_linux_pagemap.h
[0m[33mTransforming and linking bitcode files...
[0m[33m7s
[0mANALYZE:
COCCIGEN:
//# pattern-1, witnesses: 8
@@
expression E0;
@@
- atomic_read(&E0->_count)
+ page_ref_count(E0)
//# pattern-4, witnesses: 8
@@
expression E0;
@@
- atomic_inc(&E0->_count)
+ page_ref_inc(E0)
//# pattern-2, witnesses: 5
@@
expression list listE0;
@@
- page_unfreeze_refs(listE0)
+ page_ref_unfreeze(listE0)
//# pattern-8, witnesses: 5
@@
expression E0;
@@
- atomic_add(E0, &page->_count)
+ page_ref_add(page, E0)
//# pattern-6, witnesses: 3
@@
expression list listE0;
@@
- page_freeze_refs(listE0)
+ page_ref_freeze(listE0)
//# pattern-7, witnesses: 3
@@
expression E0;
@@
- atomic_set(&page->_count, E0)
+ set_page_count(page, E0)
