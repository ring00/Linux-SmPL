BUILD:
[33mbase commit: b83ae6d42143^1
[0m[33mtarget commit: b83ae6d42143
[0m[33mchecking out base commit... [0m[33mok (1s)
[0m[33mformatting diff... [0m[33mok (1s)
[0m32 source file(s) touched in the old version
`-- drivers/char/raw.c
`-- fs/aio.c
`-- fs/block_dev.c
`-- fs/btrfs/disk-io.c
`-- fs/btrfs/inode.c
`-- fs/ceph/inode.c
`-- fs/cifs/inode.c
`-- fs/configfs/inode.c
`-- fs/ecryptfs/inode.c
`-- fs/exofs/inode.c
`-- fs/fuse/inode.c
`-- fs/gfs2/glock.c
`-- fs/gfs2/ops_fstype.c
`-- fs/hugetlbfs/inode.c
`-- fs/inode.c
`-- fs/kernfs/inode.c
`-- fs/ncpfs/inode.c
`-- fs/nfs/inode.c
`-- fs/nilfs2/gcinode.c
`-- fs/nilfs2/mdt.c
`-- fs/nilfs2/page.c
`-- fs/nilfs2/page.h
`-- fs/nilfs2/super.c
`-- fs/ocfs2/dlmfs/dlmfs.c
`-- fs/ramfs/inode.c
`-- fs/romfs/super.c
`-- fs/ubifs/dir.c
`-- fs/ubifs/super.c
`-- include/linux/fs.h
`-- mm/backing-dev.c
`-- mm/shmem.c
`-- mm/swap_state.c
32 source file(s) touched in the new version
`-- drivers/char/raw.c
`-- fs/aio.c
`-- fs/block_dev.c
`-- fs/btrfs/disk-io.c
`-- fs/btrfs/inode.c
`-- fs/ceph/inode.c
`-- fs/cifs/inode.c
`-- fs/configfs/inode.c
`-- fs/ecryptfs/inode.c
`-- fs/exofs/inode.c
`-- fs/fuse/inode.c
`-- fs/gfs2/glock.c
`-- fs/gfs2/ops_fstype.c
`-- fs/hugetlbfs/inode.c
`-- fs/inode.c
`-- fs/kernfs/inode.c
`-- fs/ncpfs/inode.c
`-- fs/nfs/inode.c
`-- fs/nilfs2/gcinode.c
`-- fs/nilfs2/mdt.c
`-- fs/nilfs2/page.c
`-- fs/nilfs2/page.h
`-- fs/nilfs2/super.c
`-- fs/ocfs2/dlmfs/dlmfs.c
`-- fs/ramfs/inode.c
`-- fs/romfs/super.c
`-- fs/ubifs/dir.c
`-- fs/ubifs/super.c
`-- include/linux/fs.h
`-- mm/backing-dev.c
`-- mm/shmem.c
`-- mm/swap_state.c
[33mcompile base commit... [0m[33mok (50s)
[0m[33mapply [0m[33mb83ae6d42143... [0m[33mok (50s)
[0m[33mcompile target commit... [0m[33mok (90s)
[0mPREPARE:
[33mcollect AST for functions: nilfs_mdt_init@fs_nilfs2_mdt.c,nilfs_alloc_inode@fs_nilfs2_super.c,ecryptfs_inode_set@fs_ecryptfs_inode.c,hugetlbfs_get_inode@fs_hugetlbfs_inode.c,__blkdev_put@fs_block_dev.c,exofs_iget@fs_exofs_inode.c,btrfs_symlink@fs_btrfs_inode.c,swapper_spaces@mm_swap_state.c,init_sbd@fs_gfs2_ops_fstype.c,exofs_new_inode@fs_exofs_inode.c,raw_release@drivers_char_raw.c,open_ctree@fs_btrfs_disk-io.c,gfs2_glock_get@fs_gfs2_glock.c,cifs_iget@fs_cifs_inode.c,romfs_iget@fs_romfs_super.c,dlmfs_get_inode@fs_ocfs2_dlmfs_dlmfs.c,ubifs_new_inode@fs_ubifs_dir.c,btrfs_tmpfile@fs_btrfs_inode.c,aio_private_file@fs_aio.c,fill_inode@fs_ceph_inode.c,nilfs_mapping_init@fs_nilfs2_page.c,configfs_new_inode@fs_configfs_inode.c,nilfs_mdt_setup_shadow_map@fs_nilfs2_mdt.c,bdget@fs_block_dev.c,btrfs_create@fs_btrfs_inode.c,__blkdev_get@fs_block_dev.c,nilfs_init_gcinode@fs_nilfs2_gcinode.c,ubifs_iget@fs_ubifs_super.c,btrfs_read_locked_inode@fs_btrfs_inode.c,dlmfs_get_root_inode@fs_ocfs2_dlmfs_dlmfs.c,fuse_iget@fs_fuse_inode.c,shmem_get_inode@mm_shmem.c
[0m[33mTransforming and linking bitcode files...
[0m[33m10s
[0mANALYZE:
COCCIGEN:
//# pattern-1, witnesses: 26
@@
expression E0;
expression E1;
@@
- E0->backing_dev_info = E1;
//# pattern-4, witnesses: 3
@@
expression E0;
identifier bdev;
typedef fmode_t;
identifier fn;
identifier for_part;
identifier mode;
@@
 int fn(struct block_device * bdev, fmode_t mode, int for_part)
 {
     <...
- bdev_inode_switch_bdi(bdev->bd_inode, E0);
     ...>
 }
//# pattern-5, witnesses: 2
@@
expression E0;
expression ME2;
expression V1;
@@
- if (E0) {
- V1->i_data.backing_dev_info = ME2;
- }
//# pattern-8, witnesses: 2
@@
expression ME0;
identifier inode;
identifier shadow;
@@
 int nilfs_mdt_setup_shadow_map(struct inode * inode, struct nilfs_shadow_map * shadow)
 {
     <...
- struct backing_dev_info * bdi = inode->i_sb->s_bdi;
- nilfs_mapping_init(&ME0, inode, bdi);
+ nilfs_mapping_init(&ME0, inode);
     ...>
 }
