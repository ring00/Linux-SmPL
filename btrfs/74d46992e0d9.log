BUILD:
[33mbase commit: 74d46992e0d9^1
[0m[33mtarget commit: 74d46992e0d9
[0m[33mchecking out base commit... [0m[33mok (2s)
[0m[33mformatting diff... [0m[33mok (2s)
[0m99 source file(s) touched in the old version
`-- arch/powerpc/sysdev/axonram.c
`-- block/bio-integrity.c
`-- block/bio.c
`-- block/blk-core.c
`-- block/blk-flush.c
`-- block/blk-lib.c
`-- block/blk-merge.c
`-- block/blk-zoned.c
`-- drivers/block/brd.c
`-- drivers/block/drbd/drbd_actlog.c
`-- drivers/block/drbd/drbd_bitmap.c
`-- drivers/block/drbd/drbd_int.h
`-- drivers/block/drbd/drbd_receiver.c
`-- drivers/block/drbd/drbd_req.c
`-- drivers/block/drbd/drbd_worker.c
`-- drivers/block/floppy.c
`-- drivers/block/pktcdvd.c
`-- drivers/block/xen-blkback/blkback.c
`-- drivers/md/bcache/debug.c
`-- drivers/md/bcache/io.c
`-- drivers/md/bcache/journal.c
`-- drivers/md/bcache/request.c
`-- drivers/md/bcache/super.c
`-- drivers/md/bcache/writeback.c
`-- drivers/md/dm-bio-record.h
`-- drivers/md/dm-bufio.c
`-- drivers/md/dm-cache-target.c
`-- drivers/md/dm-crypt.c
`-- drivers/md/dm-delay.c
`-- drivers/md/dm-era-target.c
`-- drivers/md/dm-flakey.c
`-- drivers/md/dm-integrity.c
`-- drivers/md/dm-io.c
`-- drivers/md/dm-linear.c
`-- drivers/md/dm-log-writes.c
`-- drivers/md/dm-mpath.c
`-- drivers/md/dm-raid1.c
`-- drivers/md/dm-snap.c
`-- drivers/md/dm-stripe.c
`-- drivers/md/dm-switch.c
`-- drivers/md/dm-thin.c
`-- drivers/md/dm-verity-target.c
`-- drivers/md/dm-zoned-metadata.c
`-- drivers/md/dm-zoned-target.c
`-- drivers/md/dm.c
`-- drivers/md/faulty.c
`-- drivers/md/linear.c
`-- drivers/md/md.c
`-- drivers/md/md.h
`-- drivers/md/multipath.c
`-- drivers/md/raid0.c
`-- drivers/md/raid1.c
`-- drivers/md/raid10.c
`-- drivers/md/raid5-cache.c
`-- drivers/md/raid5-ppl.c
`-- drivers/md/raid5.c
`-- drivers/nvdimm/nd.h
`-- drivers/nvme/host/core.c
`-- drivers/nvme/host/lightnvm.c
`-- drivers/nvme/target/io-cmd.c
`-- drivers/s390/block/dcssblk.c
`-- drivers/s390/block/xpram.c
`-- drivers/target/target_core_iblock.c
`-- fs/block_dev.c
`-- fs/btrfs/check-integrity.c
`-- fs/btrfs/disk-io.c
`-- fs/btrfs/extent_io.c
`-- fs/btrfs/raid56.c
`-- fs/btrfs/scrub.c
`-- fs/btrfs/volumes.c
`-- fs/buffer.c
`-- fs/crypto/bio.c
`-- fs/direct-io.c
`-- fs/exofs/ore.c
`-- fs/ext4/page-io.c
`-- fs/ext4/readpage.c
`-- fs/f2fs/data.c
`-- fs/f2fs/segment.c
`-- fs/gfs2/lops.c
`-- fs/gfs2/meta_io.c
`-- fs/gfs2/ops_fstype.c
`-- fs/hfsplus/wrapper.c
`-- fs/iomap.c
`-- fs/jfs/jfs_logmgr.c
`-- fs/jfs/jfs_metapage.c
`-- fs/mpage.c
`-- fs/nfs/blocklayout/blocklayout.c
`-- fs/nilfs2/segbuf.c
`-- fs/ocfs2/cluster/heartbeat.c
`-- fs/xfs/xfs_aops.c
`-- fs/xfs/xfs_buf.c
`-- include/linux/bio.h
`-- include/linux/blk_types.h
`-- include/trace/events/bcache.h
`-- include/trace/events/block.h
`-- include/trace/events/f2fs.h
`-- kernel/power/swap.c
`-- kernel/trace/blktrace.c
`-- mm/page_io.c
99 source file(s) touched in the new version
`-- arch/powerpc/sysdev/axonram.c
`-- block/bio-integrity.c
`-- block/bio.c
`-- block/blk-core.c
`-- block/blk-flush.c
`-- block/blk-lib.c
`-- block/blk-merge.c
`-- block/blk-zoned.c
`-- drivers/block/brd.c
`-- drivers/block/drbd/drbd_actlog.c
`-- drivers/block/drbd/drbd_bitmap.c
`-- drivers/block/drbd/drbd_int.h
`-- drivers/block/drbd/drbd_receiver.c
`-- drivers/block/drbd/drbd_req.c
`-- drivers/block/drbd/drbd_worker.c
`-- drivers/block/floppy.c
`-- drivers/block/pktcdvd.c
`-- drivers/block/xen-blkback/blkback.c
`-- drivers/md/bcache/debug.c
`-- drivers/md/bcache/io.c
`-- drivers/md/bcache/journal.c
`-- drivers/md/bcache/request.c
`-- drivers/md/bcache/super.c
`-- drivers/md/bcache/writeback.c
`-- drivers/md/dm-bio-record.h
`-- drivers/md/dm-bufio.c
`-- drivers/md/dm-cache-target.c
`-- drivers/md/dm-crypt.c
`-- drivers/md/dm-delay.c
`-- drivers/md/dm-era-target.c
`-- drivers/md/dm-flakey.c
`-- drivers/md/dm-integrity.c
`-- drivers/md/dm-io.c
`-- drivers/md/dm-linear.c
`-- drivers/md/dm-log-writes.c
`-- drivers/md/dm-mpath.c
`-- drivers/md/dm-raid1.c
`-- drivers/md/dm-snap.c
`-- drivers/md/dm-stripe.c
`-- drivers/md/dm-switch.c
`-- drivers/md/dm-thin.c
`-- drivers/md/dm-verity-target.c
`-- drivers/md/dm-zoned-metadata.c
`-- drivers/md/dm-zoned-target.c
`-- drivers/md/dm.c
`-- drivers/md/faulty.c
`-- drivers/md/linear.c
`-- drivers/md/md.c
`-- drivers/md/md.h
`-- drivers/md/multipath.c
`-- drivers/md/raid0.c
`-- drivers/md/raid1.c
`-- drivers/md/raid10.c
`-- drivers/md/raid5-cache.c
`-- drivers/md/raid5-ppl.c
`-- drivers/md/raid5.c
`-- drivers/nvdimm/nd.h
`-- drivers/nvme/host/core.c
`-- drivers/nvme/host/lightnvm.c
`-- drivers/nvme/target/io-cmd.c
`-- drivers/s390/block/dcssblk.c
`-- drivers/s390/block/xpram.c
`-- drivers/target/target_core_iblock.c
`-- fs/block_dev.c
`-- fs/btrfs/check-integrity.c
`-- fs/btrfs/disk-io.c
`-- fs/btrfs/extent_io.c
`-- fs/btrfs/raid56.c
`-- fs/btrfs/scrub.c
`-- fs/btrfs/volumes.c
`-- fs/buffer.c
`-- fs/crypto/bio.c
`-- fs/direct-io.c
`-- fs/exofs/ore.c
`-- fs/ext4/page-io.c
`-- fs/ext4/readpage.c
`-- fs/f2fs/data.c
`-- fs/f2fs/segment.c
`-- fs/gfs2/lops.c
`-- fs/gfs2/meta_io.c
`-- fs/gfs2/ops_fstype.c
`-- fs/hfsplus/wrapper.c
`-- fs/iomap.c
`-- fs/jfs/jfs_logmgr.c
`-- fs/jfs/jfs_metapage.c
`-- fs/mpage.c
`-- fs/nfs/blocklayout/blocklayout.c
`-- fs/nilfs2/segbuf.c
`-- fs/ocfs2/cluster/heartbeat.c
`-- fs/xfs/xfs_aops.c
`-- fs/xfs/xfs_buf.c
`-- include/linux/bio.h
`-- include/linux/blk_types.h
`-- include/trace/events/bcache.h
`-- include/trace/events/block.h
`-- include/trace/events/f2fs.h
`-- kernel/power/swap.c
`-- kernel/trace/blktrace.c
`-- mm/page_io.c
[33mcompile base commit... [0m[33mok (77s)
[0m[33mapply [0m[33m74d46992e0d9... [0m[33mok (77s)
[0m[33mcompile target commit... [0m[33mok (146s)
[0mPREPARE:
[33mcollect AST for functions: normal_map_bio@drivers_md_dm-log-writes.c,verity_map@drivers_md_dm-verity-target.c,stripe_end_io@drivers_md_dm-stripe.c,remap@drivers_md_dm-thin.c,blk_rq_merge_ok@block_blk-merge.c,journal_read_bucket@drivers_md_bcache_journal.c,dm_bio_restore@drivers_md_dm-bio-record.h,dm_integrity_map_continue@drivers_md_dm-integrity.c,prio_io@drivers_md_bcache_super.c,remap_to_origin@drivers_md_dm-thin.c,__map_bio@drivers_md_dm.c,map_bio@drivers_md_dm-raid1.c,drbd_generic_make_request@drivers_block_drbd_drbd_int.h,bm_page_io_async@drivers_block_drbd_drbd_bitmap.c,drbd_submit_req_private_bio@drivers_block_drbd_drbd_req.c,flash_dev_make_request@drivers_md_bcache_request.c,journal_write_unlocked@drivers_md_bcache_journal.c,crypt_map@drivers_md_dm-crypt.c,alloc_dev@drivers_md_dm.c,bio_integrity_advance@block_bio-integrity.c,bio_integrity_add_page@block_bio-integrity.c,bio_integrity_trim@block_bio-integrity.c,clone_init@drivers_md_dm-crypt.c,flakey_map_bio@drivers_md_dm-flakey.c,mirror_map@drivers_md_dm-raid1.c,snapshot_map@drivers_md_dm-snap.c,handle_bad_sector@block_blk-core.c,blkdev_issue_flush@block_blk-flush.c,__floppy_read_block_0@drivers_block_floppy.c,bch_write_bdev_super@drivers_md_bcache_super.c,bio_integrity_verify_fn@block_bio-integrity.c,write_dirty@drivers_md_bcache_writeback.c,__blkdev_issue_write_zeroes@block_blk-lib.c,do_journal_discard@drivers_md_bcache_journal.c,brd_make_request@drivers_block_brd.c,remap_exception@drivers_md_dm-snap.c,do_region@drivers_md_dm-io.c,cached_dev_write@drivers_md_bcache_request.c,cached_dev_read_done@drivers_md_bcache_request.c,write_metadata@drivers_md_dm-log-writes.c,read_dirty@drivers_md_bcache_writeback.c,blkdev_reset_zones@block_blk-zoned.c,clone_endio@drivers_md_dm.c,remap_to_origin@drivers_md_dm-cache-target.c,_drbd_md_sync_page_io@drivers_block_drbd_drbd_actlog.c,cached_dev_make_request@drivers_md_bcache_request.c,bio_endio@block_bio.c,bcache_write_super@drivers_md_bcache_super.c,w_restart_disk_io@drivers_block_drbd_drbd_worker.c,__multipath_map_bio@drivers_md_dm-mpath.c,mirror_end_io@drivers_md_dm-raid1.c,blkdev_report_zones@block_blk-zoned.c,origin_map@drivers_md_dm-snap.c,cached_dev_cache_miss@drivers_md_bcache_request.c,stripe_map_range@drivers_md_dm-stripe.c,generic_make_request_checks@block_blk-core.c,bio_complete@drivers_md_bcache_request.c,submit_bio@block_blk-core.c,pkt_start_recovery@drivers_block_pktcdvd.c,__bch_submit_bbio@drivers_md_bcache_io.c,use_inline_bio@drivers_md_dm-bufio.c,bio_integrity_prep@block_bio-integrity.c,switch_map@drivers_md_dm-switch.c,__blkdev_issue_zeroout@block_blk-lib.c,bio_integrity_process@block_bio-integrity.c,linear_map_bio@drivers_md_dm-linear.c,__bio_clone_fast@block_bio.c,__blkdev_issue_discard@block_blk-lib.c,pool_map@drivers_md_dm-thin.c,blk_partition_remap@block_blk-core.c,delay_map@drivers_md_dm-delay.c,snapshot_merge_map@drivers_md_dm-snap.c,bio_clone_bioset@block_bio.c,log_one_block@drivers_md_dm-log-writes.c,drbd_submit_peer_request@drivers_block_drbd_drbd_receiver.c,pkt_start_write@drivers_block_pktcdvd.c,dm_bio_record@drivers_md_dm-bio-record.h,pkt_make_request_read@drivers_block_pktcdvd.c,dispatch_rw_block_io@drivers_block_xen-blkback_blkback.c,generic_make_request@block_blk-core.c,integrity_end_io@drivers_md_dm-integrity.c,stripe_map@drivers_md_dm-stripe.c,remap_to_cache@drivers_md_dm-cache-target.c,pkt_make_request@drivers_block_pktcdvd.c,pkt_gather_data@drivers_block_pktcdvd.c,bio_check_eod@block_blk-core.c,__blkdev_issue_write_same@block_blk-lib.c,remap_to_origin@drivers_md_dm-era-target.c,bch_btree_verify@drivers_md_bcache_debug.c,blk_rq_bio_prep@block_blk-core.c,submit_one_flush@drivers_block_drbd_drbd_receiver.c
[0m[33mTransforming and linking bitcode files...
[0m[33m10s
[0mANALYZE:
COCCIGEN:
//# pattern-2, witnesses: 59
@@
expression E0;
expression E1;
@@
- E0->bi_bdev = E1
+ bio_set_dev(E0, E1)
//# pattern-20, witnesses: 11
@@
expression E0;
@@
- E0->bi_bdev
+ E0->bi_disk
//# pattern-5, witnesses: 7
@@
expression E0;
@@
- bdev_get_queue(E0->bi_bdev)
+ E0->bi_disk->queue
//# pattern-7, witnesses: 5
@@
expression E0;
expression E1;
@@
- E0.bi_bdev = E1;
+ bio_set_dev(&E0, E1);
//# pattern-9, witnesses: 4
@@
@@
- bdev_get_integrity(bio->bi_bdev)
+ blk_get_integrity(bio->bi_disk)
//# pattern-10, witnesses: 4
@@
@@
- bio->bi_bdev->bd_disk
+ bio->bi_disk
//# pattern-12, witnesses: 3
@@
expression E0;
expression E1;
@@
- E0->bi_bdev = E1->bi_bdev;
+ bio_copy_dev(E0, E1);
//# pattern-25, witnesses: 2
@r0@
identifier i, fn;
@@
struct kernel_symbol i = {
    .value = fn,
};
@@
expression V0;
identifier bio;
typedef bool;
@@
 bool bio_integrity_prep(struct bio * bio)
 {
     <...
- V0 = bio->bi_bdev;
     ...>
 }
//# pattern-26, witnesses: 2
@r1@
identifier i, fn;
@@
struct target_type i = {
    .end_io = fn,
};
@@
identifier bio;
identifier error;
identifier ti;
@@
 int stripe_end_io(struct dm_target * ti, struct bio * bio, blk_status_t * error)
 {
     <...
- bio->bi_bdev->bd_disk
+ bio_dev
     ...>
 }
