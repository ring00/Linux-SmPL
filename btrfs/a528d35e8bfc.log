BUILD:
[33mbase commit: a528d35e8bfc^1
[0m[33mtarget commit: a528d35e8bfc
[0m[33mchecking out base commit... [0m[33mok (1s)
[0m[33mformatting diff... [0m[33mok (2s)
[0m64 source file(s) touched in the old version
`-- drivers/base/devtmpfs.c
`-- drivers/block/loop.c
`-- drivers/mtd/ubi/build.c
`-- drivers/mtd/ubi/kapi.c
`-- drivers/staging/lustre/lustre/llite/file.c
`-- drivers/staging/lustre/lustre/llite/llite_internal.h
`-- fs/9p/vfs_inode.c
`-- fs/9p/vfs_inode_dotl.c
`-- fs/afs/inode.c
`-- fs/afs/internal.h
`-- fs/bad_inode.c
`-- fs/btrfs/inode.c
`-- fs/ceph/inode.c
`-- fs/ceph/super.h
`-- fs/cifs/cifsfs.h
`-- fs/cifs/inode.c
`-- fs/coda/coda_linux.h
`-- fs/coda/inode.c
`-- fs/ecryptfs/inode.c
`-- fs/exportfs/expfs.c
`-- fs/ext4/ext4.h
`-- fs/ext4/inode.c
`-- fs/f2fs/f2fs.h
`-- fs/f2fs/file.c
`-- fs/fat/fat.h
`-- fs/fat/file.c
`-- fs/fuse/dir.c
`-- fs/gfs2/inode.c
`-- fs/kernfs/inode.c
`-- fs/kernfs/kernfs-internal.h
`-- fs/libfs.c
`-- fs/minix/inode.c
`-- fs/minix/minix.h
`-- fs/nfs/inode.c
`-- fs/nfs/namespace.c
`-- fs/nfsd/nfs4xdr.c
`-- fs/nfsd/vfs.h
`-- fs/ocfs2/file.c
`-- fs/ocfs2/file.h
`-- fs/orangefs/inode.c
`-- fs/orangefs/orangefs-kernel.h
`-- fs/overlayfs/copy_up.c
`-- fs/overlayfs/dir.c
`-- fs/overlayfs/inode.c
`-- fs/proc/base.c
`-- fs/proc/generic.c
`-- fs/proc/internal.h
`-- fs/proc/proc_net.c
`-- fs/proc/proc_sysctl.c
`-- fs/proc/root.c
`-- fs/stat.c
`-- fs/sysv/itree.c
`-- fs/sysv/sysv.h
`-- fs/ubifs/dir.c
`-- fs/ubifs/ubifs.h
`-- fs/udf/symlink.c
`-- fs/xfs/xfs_iops.c
`-- include/linux/fs.h
`-- include/linux/nfs_fs.h
`-- include/linux/stat.h
`-- include/linux/syscalls.h
`-- include/uapi/linux/fcntl.h
`-- include/uapi/linux/stat.h
`-- mm/shmem.c
65 source file(s) touched in the new version
`-- drivers/base/devtmpfs.c
`-- drivers/block/loop.c
`-- drivers/mtd/ubi/build.c
`-- drivers/mtd/ubi/kapi.c
`-- drivers/staging/lustre/lustre/llite/file.c
`-- drivers/staging/lustre/lustre/llite/llite_internal.h
`-- fs/9p/vfs_inode.c
`-- fs/9p/vfs_inode_dotl.c
`-- fs/afs/inode.c
`-- fs/afs/internal.h
`-- fs/bad_inode.c
`-- fs/btrfs/inode.c
`-- fs/ceph/inode.c
`-- fs/ceph/super.h
`-- fs/cifs/cifsfs.h
`-- fs/cifs/inode.c
`-- fs/coda/coda_linux.h
`-- fs/coda/inode.c
`-- fs/ecryptfs/inode.c
`-- fs/exportfs/expfs.c
`-- fs/ext4/ext4.h
`-- fs/ext4/inode.c
`-- fs/f2fs/f2fs.h
`-- fs/f2fs/file.c
`-- fs/fat/fat.h
`-- fs/fat/file.c
`-- fs/fuse/dir.c
`-- fs/gfs2/inode.c
`-- fs/kernfs/inode.c
`-- fs/kernfs/kernfs-internal.h
`-- fs/libfs.c
`-- fs/minix/inode.c
`-- fs/minix/minix.h
`-- fs/nfs/inode.c
`-- fs/nfs/namespace.c
`-- fs/nfsd/nfs4xdr.c
`-- fs/nfsd/vfs.h
`-- fs/ocfs2/file.c
`-- fs/ocfs2/file.h
`-- fs/orangefs/inode.c
`-- fs/orangefs/orangefs-kernel.h
`-- fs/overlayfs/copy_up.c
`-- fs/overlayfs/dir.c
`-- fs/overlayfs/inode.c
`-- fs/proc/base.c
`-- fs/proc/generic.c
`-- fs/proc/internal.h
`-- fs/proc/proc_net.c
`-- fs/proc/proc_sysctl.c
`-- fs/proc/root.c
`-- fs/stat.c
`-- fs/sysv/itree.c
`-- fs/sysv/sysv.h
`-- fs/ubifs/dir.c
`-- fs/ubifs/ubifs.h
`-- fs/udf/symlink.c
`-- fs/xfs/xfs_iops.c
`-- include/linux/fs.h
`-- include/linux/nfs_fs.h
`-- include/linux/stat.h
`-- include/linux/syscalls.h
`-- include/uapi/linux/fcntl.h
`-- include/uapi/linux/stat.h
`-- mm/shmem.c
`-- samples/statx/test-statx.c
[33mIgnore files that are created or deleted by the patch.
[0m[33mcompile base commit... [0m[33mok (94s)
[0m[33mapply [0m[33ma528d35e8bfc... [0m[33mok (94s)
[0m[33mcompile target commit... [0m[33mok (161s)
[0mPREPARE:
[33mcollect AST for functions: ubifs_getattr@fs_ubifs_dir.c,ovl_dir_getattr@fs_overlayfs_dir.c,ovl_getattr@fs_overlayfs_inode.c,ovl_copy_up_one@fs_overlayfs_copy_up.c,bad_inode_getattr@fs_bad_inode.c,proc_getattr@fs_proc_generic.c,handle_remove@drivers_base_devtmpfs.c,fh_getattr@fs_nfsd_vfs.h,ecryptfs_getattr@fs_ecryptfs_inode.c,proc_sys_getattr@fs_proc_proc_sysctl.c,fuse_getattr@fs_fuse_dir.c,coda_getattr@fs_coda_inode.c,btrfs_getattr@fs_btrfs_inode.c,nfs_namespace_getattr@fs_nfs_namespace.c,gfs2_getattr@fs_gfs2_inode.c,get_parent_attributes@fs_nfsd_nfs4xdr.c,loop_get_status@drivers_block_loop.c,simple_getattr@fs_libfs.c,empty_dir_getattr@fs_libfs.c,minix_getattr@fs_minix_inode.c,ubi_open_volume_path@drivers_mtd_ubi_kapi.c,nfsd4_encode_fattr@fs_nfsd_nfs4xdr.c,fat_getattr@fs_fat_file.c,ocfs2_getattr@fs_ocfs2_file.c,sysv_getattr@fs_sysv_itree.c,proc_tgid_net_getattr@fs_proc_proc_net.c,orangefs_getattr@fs_orangefs_inode.c,nfs_getattr@fs_nfs_inode.c,afs_getattr@fs_afs_inode.c,ll_getattr@drivers_staging_lustre_lustre_llite_file.c,cifs_getattr@fs_cifs_inode.c,kernfs_iop_getattr@fs_kernfs_inode.c,pid_getattr@fs_proc_base.c,ovl_copy_up_flags@fs_overlayfs_copy_up.c,proc_task_getattr@fs_proc_base.c,udf_symlink_getattr@fs_udf_symlink.c,ovl_clear_empty@fs_overlayfs_dir.c,v9fs_vfs_getattr_dotl@fs_9p_vfs_inode_dotl.c,generic_fillattr@fs_stat.c,vfs_getattr_nosec@fs_stat.c,ceph_getattr@fs_ceph_inode.c,vfs_getattr@fs_stat.c,f2fs_getattr@fs_f2fs_file.c,proc_root_getattr@fs_proc_root.c,ext4_getattr@fs_ext4_inode.c,get_name@fs_exportfs_expfs.c,open_mtd_by_chdev@drivers_mtd_ubi_build.c,ecryptfs_getattr_link@fs_ecryptfs_inode.c,v9fs_vfs_getattr@fs_9p_vfs_inode.c
[0m[33mTransforming and linking bitcode files...
[0m[33m18s
[0mANALYZE:
COCCIGEN:
//# pattern-6, witnesses: 20
@r0@
identifier i, fn;
@@
struct inode_operations i = {
    .getattr = fn,
};
@@
identifier dentry;
identifier mnt;
identifier r0.fn;
identifier stat;
typedef u32;
@@
- int fn(struct vfsmount * mnt, struct dentry * dentry, struct kstat * stat)
+ int fn(const struct path * path, struct kstat * stat, u32 request_mask, unsigned int flags)
 {
     <...
- d_inode(dentry)
+ d_inode(path->dentry)
     ...>
 }
//# pattern-20, witnesses: 5
@r1@
identifier i, fn;
@@
struct inode_operations i = {
    .getattr = fn,
};
@@
identifier path;
identifier query_flags;
identifier r1.fn;
identifier request_mask;
identifier stat;
typedef u32;
@@
 int fn(const struct path * path, struct kstat * stat, u32 request_mask, unsigned int query_flags)
 {
     <...
- d_inode(dentry)
+ d_inode(path->dentry)
     ...>
 }
//# pattern-27, witnesses: 4
@@
expression E1;
expression V0;
@@
- vfs_getattr(&V0, E1)
+ vfs_getattr(&V0, E1, STATX_BASIC_STATS, AT_STATX_SYNC_AS_STAT)
//# pattern-26, witnesses: 3
@r2@
identifier i, fn;
@@
struct inode_operations i = {
    .getattr = fn,
};
@@
expression E0;
expression E1;
identifier flags;
identifier path;
identifier r2.fn;
identifier request_mask;
identifier stat;
typedef u32;
@@
 int fn(const struct path * path, struct kstat * stat, u32 request_mask, unsigned int flags)
 {
     <...
- vfs_getattr(E0, E1)
+ vfs_getattr(E0, E1, request_mask, flags)
     ...>
 }
//# pattern-5, witnesses: 2
@r3@
identifier i, fn;
@@
struct inode_operations i = {
    .getattr = fn,
};
@@
identifier path;
identifier query_flags;
identifier r3.fn;
identifier request_mask;
identifier stat;
typedef u32;
@@
 int fn(const struct path * path, struct kstat * stat, u32 request_mask, unsigned int query_flags)
 {
     <...
- dentry->d_sb
+ path->dentry->d_sb
     ...>
 }
//# pattern-32, witnesses: 2
@@
@@
- vfs_getattr(&path, &stat)
+ vfs_getattr(&path, &stat, STATX_TYPE, AT_STATX_SYNC_AS_STAT)
//# pattern-37, witnesses: 2
@r4@
identifier i, fn;
@@
struct inode_operations i = {
    .getattr = fn,
};
@@
identifier path;
identifier query_flags;
identifier request_mask;
identifier stat;
typedef u32;
@@
 int nfs_getattr(const struct path * path, struct kstat * stat, u32 request_mask, unsigned int query_flags)
 {
     <...
- mnt->mnt_flags
+ path->mnt->mnt_flags
     ...>
 }
