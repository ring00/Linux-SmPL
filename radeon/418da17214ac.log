BUILD:
[33mbase commit: 418da17214ac^1
[0m[33mtarget commit: 418da17214ac
[0m[33mchecking out base commit... [0m[33mok (1s)
[0m[33mformatting diff... [0m[33mok (1s)
[0m37 source file(s) touched in the old version
`-- drivers/gpu/drm/amd/amdgpu/amdgpu_connectors.c
`-- drivers/gpu/drm/amd/amdgpu/dce_virtual.c
`-- drivers/gpu/drm/ast/ast_mode.c
`-- drivers/gpu/drm/bochs/bochs_kms.c
`-- drivers/gpu/drm/cirrus/cirrus_mode.c
`-- drivers/gpu/drm/drm_atomic.c
`-- drivers/gpu/drm/drm_atomic_helper.c
`-- drivers/gpu/drm/drm_color_mgmt.c
`-- drivers/gpu/drm/drm_connector.c
`-- drivers/gpu/drm/drm_crtc.c
`-- drivers/gpu/drm/drm_crtc_internal.h
`-- drivers/gpu/drm/drm_encoder.c
`-- drivers/gpu/drm/drm_framebuffer.c
`-- drivers/gpu/drm/drm_mode_object.c
`-- drivers/gpu/drm/drm_plane.c
`-- drivers/gpu/drm/drm_probe_helper.c
`-- drivers/gpu/drm/drm_property.c
`-- drivers/gpu/drm/hisilicon/hibmc/hibmc_drm_vdac.c
`-- drivers/gpu/drm/i915/intel_display.c
`-- drivers/gpu/drm/i915/intel_overlay.c
`-- drivers/gpu/drm/i915/intel_sprite.c
`-- drivers/gpu/drm/mgag200/mgag200_mode.c
`-- drivers/gpu/drm/nouveau/nouveau_connector.c
`-- drivers/gpu/drm/radeon/r100.c
`-- drivers/gpu/drm/radeon/r600_cs.c
`-- drivers/gpu/drm/radeon/radeon_connectors.c
`-- drivers/gpu/drm/udl/udl_connector.c
`-- drivers/gpu/drm/vmwgfx/vmwgfx_ioctl.c
`-- drivers/gpu/drm/vmwgfx/vmwgfx_kms.c
`-- drivers/staging/vboxvideo/vbox_mode.c
`-- include/drm/drm_connector.h
`-- include/drm/drm_crtc.h
`-- include/drm/drm_encoder.h
`-- include/drm/drm_framebuffer.h
`-- include/drm/drm_mode_object.h
`-- include/drm/drm_plane.h
`-- include/drm/drm_property.h
37 source file(s) touched in the new version
`-- drivers/gpu/drm/amd/amdgpu/amdgpu_connectors.c
`-- drivers/gpu/drm/amd/amdgpu/dce_virtual.c
`-- drivers/gpu/drm/ast/ast_mode.c
`-- drivers/gpu/drm/bochs/bochs_kms.c
`-- drivers/gpu/drm/cirrus/cirrus_mode.c
`-- drivers/gpu/drm/drm_atomic.c
`-- drivers/gpu/drm/drm_atomic_helper.c
`-- drivers/gpu/drm/drm_color_mgmt.c
`-- drivers/gpu/drm/drm_connector.c
`-- drivers/gpu/drm/drm_crtc.c
`-- drivers/gpu/drm/drm_crtc_internal.h
`-- drivers/gpu/drm/drm_encoder.c
`-- drivers/gpu/drm/drm_framebuffer.c
`-- drivers/gpu/drm/drm_mode_object.c
`-- drivers/gpu/drm/drm_plane.c
`-- drivers/gpu/drm/drm_probe_helper.c
`-- drivers/gpu/drm/drm_property.c
`-- drivers/gpu/drm/hisilicon/hibmc/hibmc_drm_vdac.c
`-- drivers/gpu/drm/i915/intel_display.c
`-- drivers/gpu/drm/i915/intel_overlay.c
`-- drivers/gpu/drm/i915/intel_sprite.c
`-- drivers/gpu/drm/mgag200/mgag200_mode.c
`-- drivers/gpu/drm/nouveau/nouveau_connector.c
`-- drivers/gpu/drm/radeon/r100.c
`-- drivers/gpu/drm/radeon/r600_cs.c
`-- drivers/gpu/drm/radeon/radeon_connectors.c
`-- drivers/gpu/drm/udl/udl_connector.c
`-- drivers/gpu/drm/vmwgfx/vmwgfx_ioctl.c
`-- drivers/gpu/drm/vmwgfx/vmwgfx_kms.c
`-- drivers/staging/vboxvideo/vbox_mode.c
`-- include/drm/drm_connector.h
`-- include/drm/drm_crtc.h
`-- include/drm/drm_encoder.h
`-- include/drm/drm_framebuffer.h
`-- include/drm/drm_mode_object.h
`-- include/drm/drm_plane.h
`-- include/drm/drm_property.h
[33mcompile base commit... [0m[33mok (72s)
[0m[33mapply [0m[33m418da17214ac... [0m[33mok (72s)
[0m[33mcompile target commit... [0m[33mok (130s)
[0mPREPARE:
[33mcollect AST for functions: mga_connector_best_encoder@drivers_gpu_drm_mgag200_mgag200_mode.c,drm_mode_gamma_set_ioctl@drivers_gpu_drm_drm_color_mgmt.c,drm_mode_setplane@drivers_gpu_drm_drm_plane.c,drm_atomic_helper_best_encoder@drivers_gpu_drm_drm_atomic_helper.c,hibmc_connector_best_encoder@drivers_gpu_drm_hisilicon_hibmc_hibmc_drm_vdac.c,radeon_best_single_encoder@drivers_gpu_drm_radeon_radeon_connectors.c,drm_atomic_connector_set_property@drivers_gpu_drm_drm_atomic.c,intel_overlay_put_image_ioctl@drivers_gpu_drm_i915_intel_overlay.c,drm_mode_getplane@drivers_gpu_drm_drm_plane.c,ast_best_single_encoder@drivers_gpu_drm_ast_ast_mode.c,drm_mode_validate_pipeline@drivers_gpu_drm_drm_probe_helper.c,amdgpu_connector_update_scratch_regs@drivers_gpu_drm_amd_amdgpu_amdgpu_connectors.c,radeon_find_encoder@drivers_gpu_drm_radeon_radeon_connectors.c,amdgpu_connector_encoder_get_dp_bridge_encoder_id@drivers_gpu_drm_amd_amdgpu_amdgpu_connectors.c,drm_mode_getencoder@drivers_gpu_drm_drm_encoder.c,drm_mode_dirtyfb_ioctl@drivers_gpu_drm_drm_framebuffer.c,drm_atomic_plane_set_property@drivers_gpu_drm_drm_atomic.c,cirrus_connector_best_encoder@drivers_gpu_drm_cirrus_cirrus_mode.c,bochs_connector_best_encoder@drivers_gpu_drm_bochs_bochs_kms.c,radeon_connector_encoder_is_hbr2@drivers_gpu_drm_radeon_radeon_connectors.c,vbox_best_single_encoder@drivers_staging_vboxvideo_vbox_mode.c,intel_sprite_set_colorkey@drivers_gpu_drm_i915_intel_sprite.c,amdgpu_connector_encoder_is_hbr2@drivers_gpu_drm_amd_amdgpu_amdgpu_connectors.c,amdgpu_connector_best_single_encoder@drivers_gpu_drm_amd_amdgpu_amdgpu_connectors.c,drm_mode_atomic_ioctl@drivers_gpu_drm_drm_atomic.c,drm_mode_cursor_common@drivers_gpu_drm_drm_plane.c,nouveau_connector_ddc_detect@drivers_gpu_drm_nouveau_nouveau_connector.c,drm_mode_page_flip_ioctl@drivers_gpu_drm_drm_plane.c,udl_best_single_encoder@drivers_gpu_drm_udl_udl_connector.c,r600_cs_common_vline_parse@drivers_gpu_drm_radeon_r600_cs.c,radeon_connector_update_scratch_regs@drivers_gpu_drm_radeon_radeon_connectors.c,drm_property_lookup_blob@drivers_gpu_drm_drm_property.c,drm_mode_gamma_get_ioctl@drivers_gpu_drm_drm_color_mgmt.c,drm_property_change_valid_get@drivers_gpu_drm_drm_property.c,amdgpu_connector_dvi_encoder@drivers_gpu_drm_amd_amdgpu_amdgpu_connectors.c,drm_mode_getfb@drivers_gpu_drm_drm_framebuffer.c,amdgpu_connector_find_encoder@drivers_gpu_drm_amd_amdgpu_amdgpu_connectors.c,r100_cs_packet_parse_vline@drivers_gpu_drm_radeon_r100.c,drm_mode_getproperty_ioctl@drivers_gpu_drm_drm_property.c,vmw_present_readback_ioctl@drivers_gpu_drm_vmwgfx_vmwgfx_ioctl.c,drm_mode_getcrtc@drivers_gpu_drm_drm_crtc.c,amdgpu_connector_dvi_detect@drivers_gpu_drm_amd_amdgpu_amdgpu_connectors.c,vmw_present_ioctl@drivers_gpu_drm_vmwgfx_vmwgfx_ioctl.c,dce_virtual_encoder@drivers_gpu_drm_amd_amdgpu_dce_virtual.c,drm_mode_obj_get_properties_ioctl@drivers_gpu_drm_drm_mode_object.c,drm_mode_getconnector@drivers_gpu_drm_drm_connector.c,radeon_dvi_detect@drivers_gpu_drm_radeon_radeon_connectors.c,drm_mode_setcrtc@drivers_gpu_drm_drm_crtc.c,radeon_connector_encoder_get_dp_bridge_encoder_id@drivers_gpu_drm_radeon_radeon_connectors.c,radeon_dvi_encoder@drivers_gpu_drm_radeon_radeon_connectors.c,drm_mode_obj_set_property_ioctl@drivers_gpu_drm_drm_mode_object.c,intel_get_pipe_from_crtc_id@drivers_gpu_drm_i915_intel_display.c,find_encoder@drivers_gpu_drm_nouveau_nouveau_connector.c,drm_mode_rmfb@drivers_gpu_drm_drm_framebuffer.c,vmw_kms_cursor_bypass_ioctl@drivers_gpu_drm_vmwgfx_vmwgfx_kms.c
[0m[33mTransforming and linking bitcode files...
[0m[33m13s
[0mANALYZE:
COCCIGEN:
//# pattern-1, witnesses: 29
@@
expression E0;
expression E1;
@@
- drm_encoder_find(E0, E1)
+ drm_encoder_find(E0, NULL, E1)
//# pattern-4, witnesses: 10
@@
expression E0;
@@
- drm_crtc_find(dev, E0->crtc_id)
+ drm_crtc_find(dev, file_priv, E0->crtc_id)
//# pattern-2, witnesses: 8
@r0@
identifier i, fn;
@@
struct drm_ioctl_desc i = {
    .func = fn,
};
@@
expression E0;
identifier data;
identifier dev;
identifier file_priv;
identifier r0.fn;
@@
 int fn(struct drm_device * dev, void * data, struct drm_file * file_priv)
 {
     <...
- drm_framebuffer_lookup(dev, E0)
+ drm_framebuffer_lookup(dev, file_priv, E0)
     ...>
 }
//# pattern-5, witnesses: 3
@r1@
identifier i, fn;
@@
struct drm_ioctl_desc i = {
    .func = fn,
};
@@
expression V0;
identifier data;
identifier dev;
identifier file_priv;
identifier r1.fn;
@@
 int fn(struct drm_device * dev, void * data, struct drm_file * file_priv)
 {
     <...
- drm_plane_find(dev, V0->plane_id)
+ drm_plane_find(dev, file_priv, V0->plane_id)
     ...>
 }
//# pattern-10, witnesses: 3
@@
expression E0;
expression E1;
identifier data;
identifier dev;
identifier file_priv;
identifier fn;
@@
 int fn(struct drm_device * dev, void * data, struct drm_file * file_priv)
 {
     <...
- drm_mode_object_find(dev, E0, E1)
+ drm_mode_object_find(dev, file_priv, E0, E1)
     ...>
 }
//# pattern-6, witnesses: 2
@@
@@
- drm_crtc_find(dev, val)
+ drm_crtc_find(dev, NULL, val)
//# pattern-7, witnesses: 2
@@
expression E0;
identifier data;
identifier dev;
identifier file_priv;
identifier fn;
@@
 int fn(struct drm_device * dev, void * data, struct drm_file * file_priv)
 {
     <...
- drm_connector_lookup(dev, E0)
+ drm_connector_lookup(dev, file_priv, E0)
     ...>
 }
//# pattern-11, witnesses: 2
@@
@@
- drm_crtc_find(p->rdev->ddev, crtc_id)
+ drm_crtc_find(p->rdev->ddev, p->filp, crtc_id)
//# pattern-12, witnesses: 2
@@
expression E0;
expression E2;
identifier PV1;
@@
- __drm_mode_object_find(E0, PV1, E2)
+ __drm_mode_object_find(E0, NULL, PV1, E2)
