BUILD:
[33mbase commit: 3bb403bf421b^1
[0m[33mtarget commit: 3bb403bf421b
[0m[33mchecking out base commit... [0m[33mok (1s)
[0m[33mformatting diff... [0m[33mok (1s)
[0m11 source file(s) touched in the old version
`-- drivers/gpu/drm/amd/amdgpu/amdgpu_display.c
`-- drivers/gpu/drm/amd/amdgpu/amdgpu_mode.h
`-- drivers/gpu/drm/drm_irq.c
`-- drivers/gpu/drm/i915/i915_irq.c
`-- drivers/gpu/drm/nouveau/nouveau_display.c
`-- drivers/gpu/drm/nouveau/nouveau_display.h
`-- drivers/gpu/drm/radeon/radeon_display.c
`-- drivers/gpu/drm/radeon/radeon_drv.c
`-- drivers/gpu/drm/radeon/radeon_mode.h
`-- drivers/gpu/drm/radeon/radeon_pm.c
`-- include/drm/drmP.h
11 source file(s) touched in the new version
`-- drivers/gpu/drm/amd/amdgpu/amdgpu_display.c
`-- drivers/gpu/drm/amd/amdgpu/amdgpu_mode.h
`-- drivers/gpu/drm/drm_irq.c
`-- drivers/gpu/drm/i915/i915_irq.c
`-- drivers/gpu/drm/nouveau/nouveau_display.c
`-- drivers/gpu/drm/nouveau/nouveau_display.h
`-- drivers/gpu/drm/radeon/radeon_display.c
`-- drivers/gpu/drm/radeon/radeon_drv.c
`-- drivers/gpu/drm/radeon/radeon_mode.h
`-- drivers/gpu/drm/radeon/radeon_pm.c
`-- include/drm/drmP.h
[33mcompile base commit... [0m[33mok (23s)
[0m[33mapply [0m[33m3bb403bf421b... [0m[33mok (23s)
[0m[33mcompile target commit... [0m[33mok (41s)
[0mPREPARE:
[33mcollect AST for functions: nouveau_display_scanoutpos@drivers_gpu_drm_nouveau_nouveau_display.c,radeon_crtc_handle_vblank@drivers_gpu_drm_radeon_radeon_display.c,radeon_pm_in_vbl@drivers_gpu_drm_radeon_radeon_pm.c,drm_calc_vbltimestamp_from_scanoutpos@drivers_gpu_drm_drm_irq.c,i915_get_crtc_scanoutpos@drivers_gpu_drm_i915_i915_irq.c,radeon_get_crtc_scanoutpos@drivers_gpu_drm_radeon_radeon_display.c,amdgpu_get_crtc_scanoutpos@drivers_gpu_drm_amd_amdgpu_amdgpu_display.c
[0m[33mTransforming and linking bitcode files...
[0m[33m4s
[0mANALYZE:
COCCIGEN:
//# pattern-2, witnesses: 4
@r0@
identifier i, fn;
@@
struct drm_driver i = {
    .get_scanout_position = fn,
};
@@
expression E0;
expression V1;
identifier crtc;
identifier dev;
identifier etime;
identifier flags;
identifier hpos;
identifier r0.fn;
identifier stime;
identifier vpos;
@@
- int fn(struct drm_device * dev, int crtc, unsigned int flags, int * vpos, int * hpos, ktime_t * stime, ktime_t * etime)
+ int fn(struct drm_device * dev, int crtc, unsigned int flags, int * vpos, int * hpos, ktime_t * stime, ktime_t * etime, const struct drm_display_mode * mode)
 {
     <...
- E0 = V1->mode_info.crtcs[crtc]->base.hwmode.crtc_vdisplay
+ E0 = mode->crtc_vdisplay
     ...>
 }
//# pattern-3, witnesses: 4
@r1@
identifier i, fn;
@@
struct drm_driver i = {
    .get_scanout_position = fn,
};
@@
expression E0;
expression V1;
identifier crtc;
identifier dev;
identifier etime;
identifier flags;
identifier hpos;
identifier mode;
identifier r1.fn;
identifier stime;
identifier vpos;
@@
 int fn(struct drm_device * dev, int crtc, unsigned int flags, int * vpos, int * hpos, ktime_t * stime, ktime_t * etime, const struct drm_display_mode * mode)
 {
     <...
- E0 = V1->mode_info.crtcs[crtc]->base.hwmode.crtc_vtotal
+ E0 = mode->crtc_vtotal
     ...>
 }
