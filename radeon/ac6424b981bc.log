BUILD:
[33mbase commit: ac6424b981bc^1
[0m[33mtarget commit: ac6424b981bc
[0m[33mchecking out base commit... [0m[33mok (1s)
[0m[33mformatting diff... [0m[33mok (1s)
[0m92 source file(s) touched in the old version
`-- block/blk-mq.c
`-- block/blk-wbt.c
`-- block/kyber-iosched.c
`-- drivers/bluetooth/btmrvl_main.c
`-- drivers/char/ipmi/ipmi_watchdog.c
`-- drivers/gpu/drm/i915/i915_gem_request.h
`-- drivers/gpu/drm/i915/i915_sw_fence.c
`-- drivers/gpu/drm/i915/i915_sw_fence.h
`-- drivers/gpu/drm/radeon/radeon.h
`-- drivers/gpu/drm/radeon/radeon_fence.c
`-- drivers/gpu/vga/vgaarb.c
`-- drivers/infiniband/hw/i40iw/i40iw_main.c
`-- drivers/md/bcache/btree.h
`-- drivers/net/ethernet/cavium/liquidio/octeon_main.h
`-- drivers/net/wireless/cisco/airo.c
`-- drivers/net/wireless/intersil/hostap/hostap_ioctl.c
`-- drivers/net/wireless/marvell/libertas/main.c
`-- drivers/scsi/dpt/dpti_i2o.h
`-- drivers/scsi/ips.c
`-- drivers/scsi/ips.h
`-- drivers/staging/lustre/lnet/klnds/o2iblnd/o2iblnd_cb.c
`-- drivers/staging/lustre/lnet/klnds/socklnd/socklnd_cb.c
`-- drivers/staging/lustre/lnet/libcfs/debug.c
`-- drivers/staging/lustre/lnet/libcfs/tracefile.c
`-- drivers/staging/lustre/lnet/lnet/lib-eq.c
`-- drivers/staging/lustre/lnet/lnet/lib-socket.c
`-- drivers/staging/lustre/lustre/fid/fid_request.c
`-- drivers/staging/lustre/lustre/include/lustre_lib.h
`-- drivers/staging/lustre/lustre/llite/lcommon_cl.c
`-- drivers/staging/lustre/lustre/lov/lov_cl_internal.h
`-- drivers/staging/lustre/lustre/lov/lov_object.c
`-- drivers/staging/lustre/lustre/obdclass/lu_object.c
`-- drivers/tty/synclink_gt.c
`-- drivers/vfio/virqfd.c
`-- drivers/vhost/vhost.c
`-- drivers/vhost/vhost.h
`-- fs/autofs4/autofs_i.h
`-- fs/autofs4/waitq.c
`-- fs/cachefiles/internal.h
`-- fs/cachefiles/namei.c
`-- fs/cachefiles/rdwr.c
`-- fs/dax.c
`-- fs/eventfd.c
`-- fs/eventpoll.c
`-- fs/fs_pin.c
`-- fs/nfs/nfs4proc.c
`-- fs/nilfs2/segment.c
`-- fs/orangefs/orangefs-bufmap.c
`-- fs/reiserfs/journal.c
`-- fs/select.c
`-- fs/signalfd.c
`-- fs/userfaultfd.c
`-- include/linux/blk-mq.h
`-- include/linux/eventfd.h
`-- include/linux/kvm_irqfd.h
`-- include/linux/pagemap.h
`-- include/linux/poll.h
`-- include/linux/vfio.h
`-- include/linux/wait.h
`-- include/net/af_unix.h
`-- include/uapi/linux/auto_fs.h
`-- include/uapi/linux/auto_fs4.h
`-- kernel/exit.c
`-- kernel/futex.c
`-- kernel/sched/completion.c
`-- kernel/sched/core.c
`-- kernel/sched/wait.c
`-- kernel/workqueue.c
`-- mm/filemap.c
`-- mm/memcontrol.c
`-- mm/mempool.c
`-- mm/shmem.c
`-- net/9p/trans_fd.c
`-- net/bluetooth/bnep/core.c
`-- net/bluetooth/cmtp/core.c
`-- net/bluetooth/hidp/core.c
`-- net/core/datagram.c
`-- net/unix/af_unix.c
`-- sound/core/control.c
`-- sound/core/hwdep.c
`-- sound/core/init.c
`-- sound/core/oss/pcm_oss.c
`-- sound/core/pcm_lib.c
`-- sound/core/pcm_native.c
`-- sound/core/rawmidi.c
`-- sound/core/seq/seq_fifo.c
`-- sound/core/seq/seq_memory.c
`-- sound/core/timer.c
`-- sound/isa/wavefront/wavefront_synth.c
`-- sound/pci/mixart/mixart_core.c
`-- sound/pci/ymfpci/ymfpci_main.c
`-- virt/kvm/eventfd.c
92 source file(s) touched in the new version
`-- block/blk-mq.c
`-- block/blk-wbt.c
`-- block/kyber-iosched.c
`-- drivers/bluetooth/btmrvl_main.c
`-- drivers/char/ipmi/ipmi_watchdog.c
`-- drivers/gpu/drm/i915/i915_gem_request.h
`-- drivers/gpu/drm/i915/i915_sw_fence.c
`-- drivers/gpu/drm/i915/i915_sw_fence.h
`-- drivers/gpu/drm/radeon/radeon.h
`-- drivers/gpu/drm/radeon/radeon_fence.c
`-- drivers/gpu/vga/vgaarb.c
`-- drivers/infiniband/hw/i40iw/i40iw_main.c
`-- drivers/md/bcache/btree.h
`-- drivers/net/ethernet/cavium/liquidio/octeon_main.h
`-- drivers/net/wireless/cisco/airo.c
`-- drivers/net/wireless/intersil/hostap/hostap_ioctl.c
`-- drivers/net/wireless/marvell/libertas/main.c
`-- drivers/scsi/dpt/dpti_i2o.h
`-- drivers/scsi/ips.c
`-- drivers/scsi/ips.h
`-- drivers/staging/lustre/lnet/klnds/o2iblnd/o2iblnd_cb.c
`-- drivers/staging/lustre/lnet/klnds/socklnd/socklnd_cb.c
`-- drivers/staging/lustre/lnet/libcfs/debug.c
`-- drivers/staging/lustre/lnet/libcfs/tracefile.c
`-- drivers/staging/lustre/lnet/lnet/lib-eq.c
`-- drivers/staging/lustre/lnet/lnet/lib-socket.c
`-- drivers/staging/lustre/lustre/fid/fid_request.c
`-- drivers/staging/lustre/lustre/include/lustre_lib.h
`-- drivers/staging/lustre/lustre/llite/lcommon_cl.c
`-- drivers/staging/lustre/lustre/lov/lov_cl_internal.h
`-- drivers/staging/lustre/lustre/lov/lov_object.c
`-- drivers/staging/lustre/lustre/obdclass/lu_object.c
`-- drivers/tty/synclink_gt.c
`-- drivers/vfio/virqfd.c
`-- drivers/vhost/vhost.c
`-- drivers/vhost/vhost.h
`-- fs/autofs4/autofs_i.h
`-- fs/autofs4/waitq.c
`-- fs/cachefiles/internal.h
`-- fs/cachefiles/namei.c
`-- fs/cachefiles/rdwr.c
`-- fs/dax.c
`-- fs/eventfd.c
`-- fs/eventpoll.c
`-- fs/fs_pin.c
`-- fs/nfs/nfs4proc.c
`-- fs/nilfs2/segment.c
`-- fs/orangefs/orangefs-bufmap.c
`-- fs/reiserfs/journal.c
`-- fs/select.c
`-- fs/signalfd.c
`-- fs/userfaultfd.c
`-- include/linux/blk-mq.h
`-- include/linux/eventfd.h
`-- include/linux/kvm_irqfd.h
`-- include/linux/pagemap.h
`-- include/linux/poll.h
`-- include/linux/vfio.h
`-- include/linux/wait.h
`-- include/net/af_unix.h
`-- include/uapi/linux/auto_fs.h
`-- include/uapi/linux/auto_fs4.h
`-- kernel/exit.c
`-- kernel/futex.c
`-- kernel/sched/completion.c
`-- kernel/sched/core.c
`-- kernel/sched/wait.c
`-- kernel/workqueue.c
`-- mm/filemap.c
`-- mm/memcontrol.c
`-- mm/mempool.c
`-- mm/shmem.c
`-- net/9p/trans_fd.c
`-- net/bluetooth/bnep/core.c
`-- net/bluetooth/cmtp/core.c
`-- net/bluetooth/hidp/core.c
`-- net/core/datagram.c
`-- net/unix/af_unix.c
`-- sound/core/control.c
`-- sound/core/hwdep.c
`-- sound/core/init.c
`-- sound/core/oss/pcm_oss.c
`-- sound/core/pcm_lib.c
`-- sound/core/pcm_native.c
`-- sound/core/rawmidi.c
`-- sound/core/seq/seq_fifo.c
`-- sound/core/seq/seq_memory.c
`-- sound/core/timer.c
`-- sound/isa/wavefront/wavefront_synth.c
`-- sound/pci/mixart/mixart_core.c
`-- sound/pci/ymfpci/ymfpci_main.c
`-- virt/kvm/eventfd.c
[33mcompile base commit... [0m[33mok (90s)
[0m[33mapply [0m[33mac6424b981bc... [0m[33mok (90s)
[0m[33mcompile target commit... [0m[33mok (171s)
[0mPREPARE:
[33mcollect AST for functions: cl_object_put_last@drivers_staging_lustre_lustre_llite_lcommon_cl.c,pin_kill@fs_fs_pin.c,lbs_thread@drivers_net_wireless_marvell_libertas_main.c,ksocknal_connd@drivers_staging_lustre_lnet_klnds_socklnd_socklnd_cb.c,ips_removeq_wait@drivers_scsi_ips.c,prism2_ioctl_priv_prism2_param@drivers_net_wireless_intersil_hostap_hostap_ioctl.c,nfs4_retry_setlk@fs_nfs_nfs4proc.c,signalfd_cleanup@fs_signalfd.c,autofs4_wait_release@fs_autofs4_waitq.c,__i915_sw_fence_check_if_after@drivers_gpu_drm_i915_i915_sw_fence.c,vga_get@drivers_gpu_vga_vgaarb.c,wait_for_free@fs_orangefs_orangefs-bufmap.c,ep_pwq_from_wait@fs_eventpoll.c,radeon_fence_check_signaled@drivers_gpu_drm_radeon_radeon_fence.c,blk_mq_dispatch_wake@block_blk-mq.c,vhost_poll_wakeup@drivers_vhost_vhost.c,ep_item_from_wait@fs_eventpoll.c,htable_lookup@drivers_staging_lustre_lustre_obdclass_lu_object.c,__add_wait_queue_exclusive@include_linux_wait.h,__pollwake@fs_select.c,autofs4_wait@fs_autofs4_waitq.c,kiblnd_failover_thread@drivers_staging_lustre_lnet_klnds_o2iblnd_o2iblnd_cb.c,kiblnd_scheduler@drivers_staging_lustre_lnet_klnds_o2iblnd_o2iblnd_cb.c,__i915_sw_fence_wake_up_all@drivers_gpu_drm_i915_i915_sw_fence.c,seq_client_alloc_fid@drivers_staging_lustre_lustre_fid_fid_request.c,run_down@fs_orangefs_orangefs-bufmap.c,tracefiled@drivers_staging_lustre_lnet_libcfs_tracefile.c,kyber_get_domain_token@block_kyber-iosched.c,ksocknal_reaper@drivers_staging_lustre_lnet_klnds_socklnd_socklnd_cb.c,i40iw_vf_clear_to_send@drivers_infiniband_hw_i40iw_i40iw_main.c,pollwake@fs_select.c,lu_object_find_try@drivers_staging_lustre_lustre_obdclass_lu_object.c,wake_exceptional_entry_func@fs_dax.c,__i915_sw_fence_clear_checked_bit@drivers_gpu_drm_i915_i915_sw_fence.c,ipmi_read@drivers_char_ipmi_ipmi_watchdog.c,lnet_sock_accept@drivers_staging_lustre_lnet_lnet_lib-socket.c,ep_poll@fs_eventpoll.c,seq_fid_alloc_prep@drivers_staging_lustre_lustre_fid_fid_request.c,libcfs_debug_dumplog@drivers_staging_lustre_lnet_libcfs_debug.c,lov_subobject_kill@drivers_staging_lustre_lustre_lov_lov_object.c,init_waitqueue_func_entry@include_linux_wait.h,__i915_sw_fence_await_sw_fence@drivers_gpu_drm_i915_i915_sw_fence.c,queue_log_writer@fs_reiserfs_journal.c,btmrvl_service_main_thread@drivers_bluetooth_btmrvl_main.c,userfaultfd_show_fdinfo@fs_userfaultfd.c,kyber_domain_wake@block_kyber-iosched.c,ips_removeq_wait_head@drivers_scsi_ips.c,eventfd_ctx_remove_wait_queue@fs_eventfd.c,init_waitqueue_entry@include_linux_wait.h,i915_sw_fence_await_sw_fence@drivers_gpu_drm_i915_i915_sw_fence.c,ep_poll_callback@fs_eventpoll.c,may_queue@block_blk-wbt.c,ips_putq_wait_tail@drivers_scsi_ips.c,cachefiles_mark_object_active@fs_cachefiles_namei.c,autofs4_notify_daemon@fs_autofs4_waitq.c,virqfd_wakeup@drivers_vfio_virqfd.c,seq_client_flush@drivers_staging_lustre_lustre_fid_fid_request.c,find_userfault_in@fs_userfaultfd.c,cachefiles_read_waiter@fs_cachefiles_rdwr.c,airo_thread@drivers_net_wireless_cisco_airo.c,kiblnd_connd@drivers_staging_lustre_lnet_klnds_o2iblnd_o2iblnd_cb.c,nfs4_wake_lock_waiter@fs_nfs_nfs4proc.c,__remove_wait_queue@include_linux_wait.h,lu_object_find_at@drivers_staging_lustre_lustre_obdclass_lu_object.c,lnet_eq_wait_locked@drivers_staging_lustre_lnet_lnet_lib-eq.c,userfaultfd_wake_function@fs_userfaultfd.c,i915_sw_fence_wake@drivers_gpu_drm_i915_i915_sw_fence.c,__add_wait_queue@include_linux_wait.h
[0m[33mTransforming and linking bitcode files...
[0m[33m37s
[0mANALYZE:
COCCIGEN:
//# pattern-8, witnesses: 10
@@
expression E0;
@@
- E0->wait_queue_token
+ E0->wait_queue_entry_token
//# pattern-3, witnesses: 6
@@
identifier flags;
identifier fn;
identifier key;
identifier mode;
identifier wait;
@@
- int fn(wait_queue_t * wait, unsigned int mode, int flags, void * key)
+ int fn(wait_queue_entry_t * wait, unsigned int mode, int flags, void * key)
 { ... }
//# pattern-6, witnesses: 2
@@
expression list listE0;
@@
- __add_wait_queue_tail(listE0)
+ __add_wait_queue_entry_tail(listE0)
//# pattern-22, witnesses: 2
@r0@
identifier fn;
expression P0;
@@
(varies)(P0, fn)
@@
identifier _key;
identifier mode;
identifier r0.fn;
identifier sync;
identifier wait;
@@
 int fn(wait_queue_entry_t * wait, unsigned int mode, int sync, void * _key)
 { ... }
